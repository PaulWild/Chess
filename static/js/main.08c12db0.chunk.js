(this["webpackJsonpchess-board"]=this["webpackJsonpchess-board"]||[]).push([[0],{14:function(e,t,n){e.exports={active:"draggable_active__3TbHp"}},19:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var i=n(1),c=n.n(i),r=n(13),a=n.n(r),o=(n(19),n(7)),s=n(14),l=n.n(s),h=n(0),u=function(e){var t=e.children,n=e.boundingBox,r=e.onMouseDown,a=e.onMouseMove,s=e.onMouseUp,u=Object(i.useState)({x:0,y:0,pressed:!1}),v=Object(o.a)(u,2),f=v[0],d=v[1],b=Object(i.useState)({x:0,y:0}),j=Object(o.a)(b,2),p=j[0],O=j[1],g=Object(i.useRef)(null);Object(i.useEffect)((function(){g.current&&f.pressed?g.current.style.transform="translate(".concat(p.x,"px, ").concat(p.y,"px)"):g.current&&(g.current.style.transform="")}),[p,f.pressed]);var k=c.a.useCallback((function(){d({x:0,y:0,pressed:!1}),O({x:0,y:0}),null===s||void 0===s||s(-1,-1)}),[s]),w=c.a.useCallback((function(e){var t;t="mousemove"===e.type?e:e.touches[0];var i=n?Math.max(Math.min(t.pageX,n.right),n.left):t.pageX,c=n?Math.max(Math.min(t.pageY,n.bottom),n.top):t.pageY,r=i-f.x,o=c-f.y;null===a||void 0===a||a(i,c),O({x:r,y:o})}),[f,n,a]),M=Object(i.useRef)(w);Object(i.useEffect)((function(){f.pressed?(M.current=w,document.addEventListener("mousemove",w),document.addEventListener("mouseup",k),document.addEventListener("touchmove",w),document.addEventListener("touchend",k)):(document.removeEventListener("mousemove",M.current),document.removeEventListener("mouseup",k),document.removeEventListener("touchmove",M.current),document.removeEventListener("touchend",k))}),[f.pressed,w,k]);var x=function(e){var t,i;i="mousedown"===e.type?e:e.touches[0];var c=null===(t=g.current)||void 0===t?void 0:t.getBoundingClientRect(),a=i.pageX,o=i.pageY;c&&(a=(null===c||void 0===c?void 0:c.x)+(null===c||void 0===c?void 0:c.width)/2,o=(null===c||void 0===c?void 0:c.y)+(null===c||void 0===c?void 0:c.height)/2);var s=n?Math.max(Math.min(i.pageX,n.right),n.left):i.pageX,l=n?Math.max(Math.min(i.pageY,n.bottom),n.top):i.pageY;O({x:s-a,y:l-o}),null===r||void 0===r||r(s,l),d({x:a,y:o,pressed:!0})};return Object(h.jsx)("div",{className:f.pressed?l.a.active:"",ref:g,onMouseDown:x,onTouchStart:x,children:t})},v=n(2);function f(e){return Object(h.jsx)("svg",Object(v.a)(Object(v.a)({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 45 45"},e),{},{children:Object(h.jsxs)("g",{fill:"none",fillRule:"evenodd",stroke:"#000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",children:[Object(h.jsxs)("g",{fill:"#000",strokeLinecap:"butt",children:[Object(h.jsx)("path",{d:"M9 36c3.39-.97 10.11.43 13.5-2 3.39 2.43 10.11 1.03 13.5 2 0 0 1.65.54 3 2-.68.97-1.65.99-3 .5-3.39-.97-10.11.46-13.5-1-3.39 1.46-10.11.03-13.5 1-1.35.49-2.32.47-3-.5 1.35-1.46 3-2 3-2z"}),Object(h.jsx)("path",{d:"M15 32c2.5 2.5 12.5 2.5 15 0 .5-1.5 0-2 0-2 0-2.5-2.5-4-2.5-4 5.5-1.5 6-11.5-5-15.5-11 4-10.5 14-5 15.5 0 0-2.5 1.5-2.5 4 0 0-.5.5 0 2z"}),Object(h.jsx)("path",{d:"M25 8a2.5 2.5 0 11-5 0 2.5 2.5 0 115 0z"})]}),Object(h.jsx)("path",{d:"M17.5 26h10M15 30h15m-7.5-14.5v5M20 18h5",stroke:"#fff",strokeLinejoin:"miter"})]})}))}var d=i.memo(f);function b(e){return Object(h.jsx)("svg",Object(v.a)(Object(v.a)({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 45 45"},e),{},{children:Object(h.jsxs)("g",{fill:"none",fillRule:"evenodd",stroke:"#000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",children:[Object(h.jsxs)("g",{fill:"#fff",strokeLinecap:"butt",children:[Object(h.jsx)("path",{d:"M9 36c3.39-.97 10.11.43 13.5-2 3.39 2.43 10.11 1.03 13.5 2 0 0 1.65.54 3 2-.68.97-1.65.99-3 .5-3.39-.97-10.11.46-13.5-1-3.39 1.46-10.11.03-13.5 1-1.35.49-2.32.47-3-.5 1.35-1.46 3-2 3-2z"}),Object(h.jsx)("path",{d:"M15 32c2.5 2.5 12.5 2.5 15 0 .5-1.5 0-2 0-2 0-2.5-2.5-4-2.5-4 5.5-1.5 6-11.5-5-15.5-11 4-10.5 14-5 15.5 0 0-2.5 1.5-2.5 4 0 0-.5.5 0 2z"}),Object(h.jsx)("path",{d:"M25 8a2.5 2.5 0 11-5 0 2.5 2.5 0 115 0z"})]}),Object(h.jsx)("path",{d:"M17.5 26h10M15 30h15m-7.5-14.5v5M20 18h5",strokeLinejoin:"miter"})]})}))}var j=i.memo(b);function p(e){return Object(h.jsx)("svg",Object(v.a)(Object(v.a)({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 45 45"},e),{},{children:Object(h.jsxs)("g",{fill:"none",fillRule:"evenodd",stroke:"#000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",children:[Object(h.jsx)("path",{d:"M22.5 11.63V6",strokeLinejoin:"miter"}),Object(h.jsx)("path",{d:"M22.5 25s4.5-7.5 3-10.5c0 0-1-2.5-3-2.5s-3 2.5-3 2.5c-1.5 3 3 10.5 3 10.5",fill:"#000",strokeLinecap:"butt",strokeLinejoin:"miter"}),Object(h.jsx)("path",{d:"M12.5 37c5.5 3.5 14.5 3.5 20 0v-7s9-4.5 6-10.5c-4-6.5-13.5-3.5-16 4V27v-3.5c-2.5-7.5-12-10.5-16-4-3 6 6 10.5 6 10.5v7",fill:"#000"}),Object(h.jsx)("path",{d:"M20 8h5",strokeLinejoin:"miter"}),Object(h.jsx)("path",{d:"M32 29.5s8.5-4 6.03-9.65C34.15 14 25 18 22.5 24.5v2.1-2.1C20 18 10.85 14 6.97 19.85 4.5 25.5 13 29.5 13 29.5",stroke:"#fff"}),Object(h.jsx)("path",{d:"M12.5 30c5.5-3 14.5-3 20 0m-20 3.5c5.5-3 14.5-3 20 0m-20 3.5c5.5-3 14.5-3 20 0",stroke:"#fff"})]})}))}var O=i.memo(p);function g(e){return Object(h.jsx)("svg",Object(v.a)(Object(v.a)({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 45 45"},e),{},{children:Object(h.jsxs)("g",{fill:"none",fillRule:"evenodd",stroke:"#000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",children:[Object(h.jsx)("path",{d:"M22.5 11.63V6M20 8h5",strokeLinejoin:"miter"}),Object(h.jsx)("path",{d:"M22.5 25s4.5-7.5 3-10.5c0 0-1-2.5-3-2.5s-3 2.5-3 2.5c-1.5 3 3 10.5 3 10.5",fill:"#fff",strokeLinecap:"butt",strokeLinejoin:"miter"}),Object(h.jsx)("path",{d:"M12.5 37c5.5 3.5 14.5 3.5 20 0v-7s9-4.5 6-10.5c-4-6.5-13.5-3.5-16 4V27v-3.5c-2.5-7.5-12-10.5-16-4-3 6 6 10.5 6 10.5v7",fill:"#fff"}),Object(h.jsx)("path",{d:"M12.5 30c5.5-3 14.5-3 20 0M12.5 33.5c5.5-3 14.5-3 20 0M12.5 37c5.5-3 14.5-3 20 0"})]})}))}var k=i.memo(g);function w(e){return Object(h.jsx)("svg",Object(v.a)(Object(v.a)({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 45 45"},e),{},{children:Object(h.jsxs)("g",{fill:"none",fillRule:"evenodd",stroke:"#000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",children:[Object(h.jsx)("path",{d:"M22 10c10.5 1 16.5 8 16 29H15c0-9 10-6.5 8-21",fill:"#000"}),Object(h.jsx)("path",{d:"M24 18c.38 2.91-5.55 7.37-8 9-3 2-2.82 4.34-5 4-1.042-.94 1.41-3.04 0-3-1 0 .19 1.23-1 2-1 0-4.003 1-4-4 0-2 6-12 6-12s1.89-1.9 2-3.5c-.73-.994-.5-2-.5-3 1-1 3 2.5 3 2.5h2s.78-1.992 2.5-3c1 0 1 3 1 3",fill:"#000"}),Object(h.jsx)("path",{d:"M9.5 25.5a.5.5 0 11-1 0 .5.5 0 111 0z",fill:"#fff",stroke:"#fff"}),Object(h.jsx)("path",{d:"M14.933 15.75a.5 1.5 30 11-.866-.5.5 1.5 30 11.866.5z",fill:"#fff",stroke:"#fff",strokeWidth:1.49997}),Object(h.jsx)("path",{d:"M24.55 10.4l-.45 1.45.5.15c3.15 1 5.65 2.49 7.9 6.75S35.75 29.06 35.25 39l-.05.5h2.25l.05-.5c.5-10.06-.88-16.85-3.25-21.34-2.37-4.49-5.79-6.64-9.19-7.16l-.51-.1z",fill:"#fff",stroke:"none"})]})}))}var M=i.memo(w);function x(e){return Object(h.jsx)("svg",Object(v.a)(Object(v.a)({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 45 45"},e),{},{children:Object(h.jsxs)("g",{fill:"none",fillRule:"evenodd",stroke:"#000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",children:[Object(h.jsx)("path",{d:"M22 10c10.5 1 16.5 8 16 29H15c0-9 10-6.5 8-21",fill:"#fff"}),Object(h.jsx)("path",{d:"M24 18c.38 2.91-5.55 7.37-8 9-3 2-2.82 4.34-5 4-1.042-.94 1.41-3.04 0-3-1 0 .19 1.23-1 2-1 0-4.003 1-4-4 0-2 6-12 6-12s1.89-1.9 2-3.5c-.73-.994-.5-2-.5-3 1-1 3 2.5 3 2.5h2s.78-1.992 2.5-3c1 0 1 3 1 3",fill:"#fff"}),Object(h.jsx)("path",{d:"M9.5 25.5a.5.5 0 11-1 0 .5.5 0 111 0z",fill:"#000"}),Object(h.jsx)("path",{d:"M14.933 15.75a.5 1.5 30 11-.866-.5.5 1.5 30 11.866.5z",fill:"#000",strokeWidth:1.49997})]})}))}var m=i.memo(x),y=function(e){return Object(h.jsx)("svg",Object(v.a)(Object(v.a)({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 45 45"},e),{},{children:Object(h.jsx)("path",{d:"M22.5 9c-2.21 0-4 1.79-4 4 0 .89.29 1.71.78 2.38C17.33 16.5 16 18.59 16 21c0 2.03.94 3.84 2.41 5.03-3 1.06-7.41 5.55-7.41 13.47h23c0-7.92-4.41-12.41-7.41-13.47 1.47-1.19 2.41-3 2.41-5.03 0-2.41-1.33-4.5-3.28-5.62.49-.67.78-1.49.78-2.38 0-2.21-1.79-4-4-4z",stroke:"#000",strokeWidth:1.5,strokeLinecap:"round"})}))},_=i.memo(y);function A(e){return Object(h.jsx)("svg",Object(v.a)(Object(v.a)({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 45 45"},e),{},{children:Object(h.jsx)("path",{d:"M22.5 9c-2.21 0-4 1.79-4 4 0 .89.29 1.71.78 2.38C17.33 16.5 16 18.59 16 21c0 2.03.94 3.84 2.41 5.03-3 1.06-7.41 5.55-7.41 13.47h23c0-7.92-4.41-12.41-7.41-13.47 1.47-1.19 2.41-3 2.41-5.03 0-2.41-1.33-4.5-3.28-5.62.49-.67.78-1.49.78-2.38 0-2.21-1.79-4-4-4z",fill:"#fff",stroke:"#000",strokeWidth:1.5,strokeLinecap:"round"})}))}var L=i.memo(A);function E(e){return Object(h.jsx)("svg",Object(v.a)(Object(v.a)({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 45 45"},e),{},{children:Object(h.jsxs)("g",{stroke:"#000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",children:[Object(h.jsx)("path",{d:"M9 26c8.5-1.5 21-1.5 27 0l2.5-12.5L31 25l-.3-14.1-5.2 13.6-3-14.5-3 14.5-5.2-13.6L14 25 6.5 13.5 9 26z",strokeLinecap:"butt"}),Object(h.jsx)("path",{d:"M9 26c0 2 1.5 2 2.5 4 1 1.5 1 1 .5 3.5-1.5 1-1 2.5-1 2.5-1.5 1.5 0 2.5 0 2.5 6.5 1 16.5 1 23 0 0 0 1.5-1 0-2.5 0 0 .5-1.5-1-2.5-.5-2.5-.5-2 .5-3.5 1-2 2.5-2 2.5-4-8.5-1.5-18.5-1.5-27 0zM11.5 30c3.5-1 18.5-1 22 0M12 33.5c6-1 15-1 21 0"}),Object(h.jsx)("circle",{cx:6,cy:12,r:2}),Object(h.jsx)("circle",{cx:14,cy:9,r:2}),Object(h.jsx)("circle",{cx:22.5,cy:8,r:2}),Object(h.jsx)("circle",{cx:31,cy:9,r:2}),Object(h.jsx)("circle",{cx:39,cy:12,r:2}),Object(h.jsx)("path",{d:"M11 38.5a35 35 1 0023 0",fill:"none",strokeLinecap:"butt"}),Object(h.jsx)("g",{fill:"none",stroke:"#fff",children:Object(h.jsx)("path",{d:"M11 29a35 35 1 0123 0M12.5 31.5h20M11.5 34.5a35 35 1 0022 0M10.5 37.5a35 35 1 0024 0"})})]})}))}var P=i.memo(E);function T(e){return Object(h.jsx)("svg",Object(v.a)(Object(v.a)({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 45 45"},e),{},{children:Object(h.jsxs)("g",{fill:"#fff",stroke:"#000",strokeWidth:1.5,strokeLinejoin:"round",children:[Object(h.jsx)("path",{d:"M9 26c8.5-1.5 21-1.5 27 0l2.5-12.5L31 25l-.3-14.1-5.2 13.6-3-14.5-3 14.5-5.2-13.6L14 25 6.5 13.5 9 26z"}),Object(h.jsx)("path",{d:"M9 26c0 2 1.5 2 2.5 4 1 1.5 1 1 .5 3.5-1.5 1-1 2.5-1 2.5-1.5 1.5 0 2.5 0 2.5 6.5 1 16.5 1 23 0 0 0 1.5-1 0-2.5 0 0 .5-1.5-1-2.5-.5-2.5-.5-2 .5-3.5 1-2 2.5-2 2.5-4-8.5-1.5-18.5-1.5-27 0z"}),Object(h.jsx)("path",{d:"M11.5 30c3.5-1 18.5-1 22 0M12 33.5c6-1 15-1 21 0",fill:"none"}),Object(h.jsx)("circle",{cx:6,cy:12,r:2}),Object(h.jsx)("circle",{cx:14,cy:9,r:2}),Object(h.jsx)("circle",{cx:22.5,cy:8,r:2}),Object(h.jsx)("circle",{cx:31,cy:9,r:2}),Object(h.jsx)("circle",{cx:39,cy:12,r:2})]})}))}var C=i.memo(T);function W(e){return Object(h.jsx)("svg",Object(v.a)(Object(v.a)({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 45 45"},e),{},{children:Object(h.jsxs)("g",{fillRule:"evenodd",stroke:"#000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",children:[Object(h.jsx)("path",{d:"M9 39h27v-3H9v3zM12.5 32l1.5-2.5h17l1.5 2.5h-20zM12 36v-4h21v4H12z",strokeLinecap:"butt"}),Object(h.jsx)("path",{d:"M14 29.5v-13h17v13H14z",strokeLinecap:"butt",strokeLinejoin:"miter"}),Object(h.jsx)("path",{d:"M14 16.5L11 14h23l-3 2.5H14zM11 14V9h4v2h5V9h5v2h5V9h4v5H11z",strokeLinecap:"butt"}),Object(h.jsx)("path",{d:"M12 35.5h21M13 31.5h19M14 29.5h17M14 16.5h17M11 14h23",fill:"none",stroke:"#fff",strokeWidth:1,strokeLinejoin:"miter"})]})}))}function I(e){return Object(h.jsx)("svg",Object(v.a)(Object(v.a)({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 45 45"},e),{},{children:Object(h.jsxs)("g",{fill:"#fff",fillRule:"evenodd",stroke:"#000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",children:[Object(h.jsx)("path",{d:"M9 39h27v-3H9v3zM12 36v-4h21v4H12zM11 14V9h4v2h5V9h5v2h5V9h4v5",strokeLinecap:"butt"}),Object(h.jsx)("path",{d:"M34 14l-3 3H14l-3-3"}),Object(h.jsx)("path",{d:"M31 17v12.5H14V17",strokeLinecap:"butt",strokeLinejoin:"miter"}),Object(h.jsx)("path",{d:"M31 29.5l1.5 2.5h-20l1.5-2.5"}),Object(h.jsx)("path",{d:"M11 14h23",fill:"none",strokeLinejoin:"miter"})]})}))}var K,B={King:O,Queen:P,Knight:M,Bishop:d,Pawn:_,Rook:i.memo(W)},H={King:k,Queen:C,Knight:m,Bishop:j,Pawn:L,Rook:i.memo(I)},S=n(9),R=n.n(S),N=n(3),q=n(4);!function(e){e[e.None=0]="None",e[e.K=1]="K",e[e.Q=2]="Q",e[e.k=4]="k",e[e.q=8]="q"}(K||(K={}));var z=n(8),V=n(6),Q=n(5),D=[8,7,6,5,4,3,2,1],G=["a","b","c","d","e","f","g","h"],U=function(){function e(t){var n=this;Object(N.a)(this,e),this._board=void 0,this.clone=function(){return new e(n._board.map((function(e){return e.clone()})))},this.move=function(e,t){var i=n.getPieceAt(e),c=i.piece,r=n.getPieceAt(t);if(!c)throw new Error("no piece to move");i.remove(),r.place(c)},this.remove=function(e){var t=n.getPieceAt(e);if(!t.piece)throw new Error("no piece to remove");t.remove()},this.placeAt=function(e,t){n.getPieceAt(e).place(t)},this.getPieceAt=function(e){var t=n._board.find((function(t){return t.rank===e.rank&&t.file===e.file}));if(void 0===t)throw new Error("Out of bounds");return t},this.getPieces=function(e){return n.board.filter((function(t){return null!==t.piece&&t.piece.colour===e}))},this._board=t}return Object(q.a)(e,[{key:"board",get:function(){return this._board}},{key:"fenPlacement",get:function(){var e=this,t=[];return D.forEach((function(n){var i=0,c="";G.forEach((function(t){var r=e.getPieceAt({rank:n,file:t});if(r.piece){i>0&&(c+=i,i=0);var a="";switch(r.piece.pieceType){case"BISHOP":a="b";break;case"KING":a="k";break;case"KNIGHT":a="n";break;case"PAWN":a="p";break;case"QUEEN":a="q";break;case"ROOK":a="r"}"WHITE"===r.piece.colour&&(a=a.toUpperCase()),c+=a}else"h"===t&&(c+=++i);r.piece||(i+=1)})),t.push(c)})),t.join("/")}}]),e}(),F={move:"INVALID"},X=function(){function e(t,n,i,c){var r=this;Object(N.a)(this,e),this.piece=void 0,this.board=void 0,this.enPassantTarget=void 0,this.castlingRights=void 0,this.getMoveAtPosition=function(e,t,n){var i=G.indexOf(e.file)+n,c=e.rank+t;return c>8||i>7||c<1||i<0?F:r.checkPosition(c,G[i])},this.getMovesOnLine=function(e,t,n){for(var i=[],c=1;c<8;c++){var a=G.indexOf(e.file)+n*c,o=e.rank+t*c;if(o>8||a>7||o<1||a<0)break;var s=r.checkPosition(o,G[a]);if("INVALID"===s.move)break;if(i.push(s),"Capture"===s.move)break}return i},this.checkPosition=function(e,t){return r.canTakeAt(e,t)?{move:"Capture",rank:e,file:t}:r.canMoveTo(e,t)?{move:"Move",rank:e,file:t}:F},this.isStandardMove=function(e){return"INVALID"!==e.move},this.canTakeAt=function(e,t){var n=r.board.getPieceAt({rank:e,file:t});return null!==n.piece&&n.piece.colour!==r.piece.colour},this.canMoveTo=function(e,t){return null===r.board.getPieceAt({rank:e,file:t}).piece},this.isKingInCheck=function(e){var t=r.board.getPieces(e).find((function(e){var t;return"KING"===(null===(t=e.piece)||void 0===t?void 0:t.pieceType)}));return r.board.getPieces("WHITE"===e?"BLACK":"WHITE").flatMap((function(e){return ne(e.piece,r.board).getPotentialMoves({file:e.file,rank:e.rank})})).some((function(e){return e.file===(null===t||void 0===t?void 0:t.file)&&e.rank===(null===t||void 0===t?void 0:t.rank)}))},this.piece=t,this.board=n,this.enPassantTarget=i,this.castlingRights=c}return Object(q.a)(e,[{key:"moves",value:function(e){var t=this;return this.getPotentialMoves(e).filter((function(n){var i=t.board.clone();return i.move(e,{rank:n.rank,file:n.file}),!ne(t.piece,i).isKingInCheck(t.piece.colour)}))}},{key:"canMove",value:function(e,t){var n=this.getPotentialMoves(e).find((function(e){return e.file===t.file&&e.rank===t.rank}));if(!n)return{move:"INVALID"};var i=this.board.clone();return i.move(e,t),ne(this.piece,i).isKingInCheck(this.piece.colour)?F:n}}]),e}(),Y=function(e){Object(V.a)(n,e);var t=Object(Q.a)(n);function n(){return Object(N.a)(this,n),t.apply(this,arguments)}return Object(q.a)(n,[{key:"getPotentialMoves",value:function(e){return[].concat(Object(z.a)(this.getMovesOnLine(e,-1,-1)),Object(z.a)(this.getMovesOnLine(e,1,1)),Object(z.a)(this.getMovesOnLine(e,1,-1)),Object(z.a)(this.getMovesOnLine(e,-1,1)))}}]),n}(X),J=function(e){Object(V.a)(n,e);var t=Object(Q.a)(n);function n(){var e;Object(N.a)(this,n);for(var i=arguments.length,c=new Array(i),r=0;r<i;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).castlingDeltas=function(e){return"SHORT"===e?[0,1,2]:[0,-1,-2]},e}return Object(q.a)(n,[{key:"getPotentialMoves",value:function(e){var t=this,n=[],i=G.indexOf(e.file),c=e.rank;return n=[[1,1],[0,1],[1,0],[-1,0],[-1,-1],[0,-1],[-1,1],[1,-1]].map((function(n){var i=Object(o.a)(n,2),c=i[0],r=i[1];return t.getMoveAtPosition(e,c,r)})).filter(this.isStandardMove),this.canCastle("SHORT")&&n.push({move:"Castle",type:"SHORT",colour:this.piece.colour,rank:c,file:G[i+2]}),this.canCastle("LONG")&&n.push({move:"Castle",type:"LONG",colour:this.piece.colour,rank:c,file:G[i-2]}),n}},{key:"canCastle",value:function(e){var t=this,n=this.castlingDeltas(e),i="WHITE"===this.piece.colour?1:8,c=K.None;return c="WHITE"===this.piece.colour?"SHORT"===e?K.k:K.q:"SHORT"===e?K.K:K.Q,!!(this.castlingRights&c)&&n.every((function(e){var n=4+e;if(null===t.board.getPieceAt({file:G[n],rank:i}).piece||0===e){var c=t.board.clone();return c.move({rank:i,file:"e"},{rank:i,file:G[n]}),!ne(t.piece,c).isKingInCheck(t.piece.colour)}return!1}))}}]),n}(X),Z=function(e){Object(V.a)(n,e);var t=Object(Q.a)(n);function n(){return Object(N.a)(this,n),t.apply(this,arguments)}return Object(q.a)(n,[{key:"getPotentialMoves",value:function(e){var t=this;if(null===this.board.getPieceAt(e).piece)throw new Error("nope");return[[1,2],[2,1],[-1,2],[-2,1],[-1,-2],[-2,-1],[1,-2],[2,-1]].map((function(n){var i=Object(o.a)(n,2),c=i[0],r=i[1];return t.getMoveAtPosition(e,c,r)})).filter(this.isStandardMove)}}]),n}(X),$=function(e){Object(V.a)(n,e);var t=Object(Q.a)(n);function n(){return Object(N.a)(this,n),t.apply(this,arguments)}return Object(q.a)(n,[{key:"getPotentialMoves",value:function(e){var t=this,n=[],i="WHITE"===this.piece.colour?1:-1,c=this.pieceMoved(e),r=[[i,1],[i,-1]],a=this.getMoveAtPosition(e,i,0);if(this.isStandardMove(a)&&n.push(a),this.isStandardMove(a)&&"Capture"!==a.move&&!c){var s=e.rank+2*i;this.canMoveTo(s,e.file)&&n.push({move:"PawnPush",rank:s,file:e.file})}var l=r.map((function(n){var i=Object(o.a)(n,2),c=i[0],r=i[1];return t.getMoveAtPosition(e,c,r)})).filter(this.isStandardMove).filter((function(e){return"Capture"===e.move}));return r.forEach((function(n){var i,c,r=Object(o.a)(n,2),a=r[0],s=r[1],h=e.rank+a,u=G[G.indexOf(e.file)+s];(null===(i=t.enPassantTarget)||void 0===i?void 0:i.file)===u&&(null===(c=t.enPassantTarget)||void 0===c?void 0:c.rank)===h&&l.push({move:"CaptureEnPassant",rank:h,file:u})})),[].concat(n,Object(z.a)(l))}},{key:"pieceMoved",value:function(e){return("WHITE"===this.piece.colour?2:7)!==e.rank}}]),n}(X),ee=function(e){Object(V.a)(n,e);var t=Object(Q.a)(n);function n(){return Object(N.a)(this,n),t.apply(this,arguments)}return Object(q.a)(n,[{key:"getPotentialMoves",value:function(e){return[].concat(Object(z.a)(this.getMovesOnLine(e,1,0)),Object(z.a)(this.getMovesOnLine(e,0,1)),Object(z.a)(this.getMovesOnLine(e,0,-1)),Object(z.a)(this.getMovesOnLine(e,-1,0)))}}]),n}(X),te=function(e){Object(V.a)(n,e);var t=Object(Q.a)(n);function n(){return Object(N.a)(this,n),t.apply(this,arguments)}return Object(q.a)(n,[{key:"getPotentialMoves",value:function(e){return[].concat(Object(z.a)(new ee(this.piece,this.board,this.enPassantTarget,this.castlingRights).getPotentialMoves(e)),Object(z.a)(new Y(this.piece,this.board,this.enPassantTarget,this.castlingRights).getPotentialMoves(e)))}}]),n}(X),ne=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:K.None;switch(e.pieceType){case"BISHOP":return new Y(e,t,n,i);case"KING":return new J(e,t,n,i);case"KNIGHT":return new Z(e,t,n,i);case"PAWN":return new $(e,t,n,i);case"QUEEN":return new te(e,t,n,i);case"ROOK":return new ee(e,t,n,i)}},ie=function e(t){Object(N.a)(this,e),this.pieceType=void 0,this.colour=void 0,this.colour=t},ce=function(e){Object(V.a)(n,e);var t=Object(Q.a)(n);function n(){var e;Object(N.a)(this,n);for(var i=arguments.length,c=new Array(i),r=0;r<i;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).pieceType="BISHOP",e}return n}(ie),re=function(e){Object(V.a)(n,e);var t=Object(Q.a)(n);function n(){var e;Object(N.a)(this,n);for(var i=arguments.length,c=new Array(i),r=0;r<i;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).pieceType="KING",e}return n}(ie),ae=function(e){Object(V.a)(n,e);var t=Object(Q.a)(n);function n(){var e;Object(N.a)(this,n);for(var i=arguments.length,c=new Array(i),r=0;r<i;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).pieceType="KNIGHT",e}return n}(ie),oe=function(e){Object(V.a)(n,e);var t=Object(Q.a)(n);function n(){var e;Object(N.a)(this,n);for(var i=arguments.length,c=new Array(i),r=0;r<i;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).pieceType="QUEEN",e}return n}(ie),se=function(e){Object(V.a)(n,e);var t=Object(Q.a)(n);function n(){var e;Object(N.a)(this,n);for(var i=arguments.length,c=new Array(i),r=0;r<i;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).pieceType="ROOK",e}return n}(ie),le=function(e){Object(V.a)(n,e);var t=Object(Q.a)(n);function n(){var e;Object(N.a)(this,n);for(var i=arguments.length,c=new Array(i),r=0;r<i;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).pieceType="PAWN",e}return n}(ie),he=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(N.a)(this,e),this._piece=void 0,this.rank=void 0,this.file=void 0,this.rank=t,this.file=n,this._piece=i}return Object(q.a)(e,[{key:"piece",get:function(){return this._piece}},{key:"place",value:function(e){this._piece=e}},{key:"remove",value:function(){this._piece=null}},{key:"clone",value:function(){return new e(this.rank,this.file,this.piece)}}]),e}(),ue=(new se("WHITE"),new ae("WHITE"),new ce("WHITE"),new oe("WHITE"),new re("WHITE"),new ce("WHITE"),new ae("WHITE"),new se("WHITE"),new le("WHITE"),new le("WHITE"),new le("WHITE"),new le("WHITE"),new le("WHITE"),new le("WHITE"),new le("WHITE"),new le("WHITE"),new se("BLACK"),new ae("BLACK"),new ce("BLACK"),new oe("BLACK"),new re("BLACK"),new ce("BLACK"),new ae("BLACK"),new se("BLACK"),new le("BLACK"),new le("BLACK"),new le("BLACK"),new le("BLACK"),new le("BLACK"),new le("BLACK"),new le("BLACK"),new le("BLACK"),new(function(){function e(){var t=this;Object(N.a)(this,e),this._board=void 0,this._fullMoves=void 0,this._halfMoves=void 0,this._enPessantSquare=void 0,this._castlingAbility=void 0,this._state=void 0,this.getKing=function(e){var n=t.board.getPieces(e).find((function(e){var t;return"KING"===(null===(t=e.piece)||void 0===t?void 0:t.pieceType)}));if(!n)throw new Error("Where's the king?");return n},this._board=new U(function(){var e=D.flatMap((function(e){return G.map((function(t){return new he(e,t)}))})),t=function(t,n,i){var c=e.find((function(e){return e.file===n&&e.rank===t}));null===c||void 0===c||c.place(i)};return t(1,"a",new se("WHITE")),t(1,"b",new ae("WHITE")),t(1,"c",new ce("WHITE")),t(1,"d",new oe("WHITE")),t(1,"e",new re("WHITE")),t(1,"f",new ce("WHITE")),t(1,"g",new ae("WHITE")),t(1,"h",new se("WHITE")),t(2,"a",new le("WHITE")),t(2,"b",new le("WHITE")),t(2,"c",new le("WHITE")),t(2,"d",new le("WHITE")),t(2,"e",new le("WHITE")),t(2,"f",new le("WHITE")),t(2,"g",new le("WHITE")),t(2,"h",new le("WHITE")),t(7,"a",new le("BLACK")),t(7,"b",new le("BLACK")),t(7,"c",new le("BLACK")),t(7,"d",new le("BLACK")),t(7,"e",new le("BLACK")),t(7,"f",new le("BLACK")),t(7,"g",new le("BLACK")),t(7,"h",new le("BLACK")),t(8,"a",new se("BLACK")),t(8,"b",new ae("BLACK")),t(8,"c",new ce("BLACK")),t(8,"d",new oe("BLACK")),t(8,"e",new re("BLACK")),t(8,"f",new ce("BLACK")),t(8,"g",new ae("BLACK")),t(8,"h",new se("BLACK")),e}()),this._state="WhiteMove",this._fullMoves=1,this._halfMoves=0,this._castlingAbility=K.K|K.Q|K.k|K.q}return Object(q.a)(e,[{key:"board",get:function(){return this._board}},{key:"_enPessantFen",get:function(){return this._enPessantSquare?"".concat(this._enPessantSquare.file).concat(this._enPessantSquare.rank):"-"}},{key:"state",get:function(){return this._state}},{key:"move",value:function(e,t){var n,i;if("BlackMove"===this._state||"WhiteMove"===this._state){var c=this._board.getPieceAt(e);if(("BlackMove"!==this._state||"WHITE"!==(null===(n=c.piece)||void 0===n?void 0:n.colour))&&("WhiteMove"!==this._state||"BLACK"!==(null===(i=c.piece)||void 0===i?void 0:i.colour))){if(!c.piece)throw new Error("No Piece to move");var r=c.piece,a=ne(c.piece,this._board,this._enPessantSquare,this._castlingAbility).canMove(e,t);switch(a.move){case"INVALID":return;case"Move":case"PawnPush":case"CaptureEnPassant":case"Capture":if("CaptureEnPassant"===a.move){if(!this._enPessantSquare)throw new Error("no enPassant");this._board.remove({rank:e.rank,file:this._enPessantSquare.file})}if(this._board.move(e,t),"PawnPush"===a.move){var o=t.rank;"WHITE"===r.colour?o-=1:o+=1,this._enPessantSquare={rank:o,file:a.file}}else this._enPessantSquare=void 0;"KING"===r.pieceType&&("WHITE"===r.colour&&(this._castlingAbility&=~K.K,this._castlingAbility&=~K.Q),"BLACK"===r.colour&&(this._castlingAbility&=~K.k,this._castlingAbility&=~K.q)),"ROOK"===r.pieceType&&(1===e.rank&&"a"===e.file&&(this._castlingAbility&=~K.Q),1===e.rank&&"h"===e.file&&(this._castlingAbility&=~K.K),8===e.rank&&"a"===e.file&&(this._castlingAbility&=~K.q),8===e.rank&&"h"===e.file&&(this._castlingAbility&=~K.k)),"Capture"===a.move&&(1===t.rank&&"a"===t.file&&(this._castlingAbility&=~K.Q),1===t.rank&&"h"===t.file&&(this._castlingAbility&=~K.K),8===t.rank&&"a"===t.file&&(this._castlingAbility&=~K.q),8===t.rank&&"h"===t.file&&(this._castlingAbility&=~K.k)),"Capture"===a.move||"CaptureEnPassant"===a.move||"PawnPush"===a.move||"Move"===a.move&&"PAWN"===r.pieceType?this._halfMoves=0:this._halfMoves+=1;break;case"Castle":this._board.move(e,t);var s={rank:c.rank,file:"SHORT"===a.type?"h":"a"},l={rank:c.rank,file:"SHORT"===a.type?"f":"d"};this._board.move(s,l),"WHITE"===r.colour&&(this._castlingAbility&=~K.K,this._castlingAbility&=~K.Q),"BLACK"===r.colour&&(this._castlingAbility&=~K.k,this._castlingAbility&=~K.q)}this.changeState(),console.log(this.getFenString())}}}},{key:"getFenString",value:function(){return"BlackMove"===this._state||"WhiteMove"===this._state?"".concat(this._board.fenPlacement," ").concat("WhiteMove"===this._state?"w":"b"," ").concat(this.castlingAbilityString()," ").concat(this._enPessantFen," ").concat(this._halfMoves," ").concat(this._fullMoves):""}},{key:"castlingAbilityString",value:function(){var e="";return this._castlingAbility&K.K&&(e+="K"),this._castlingAbility&K.Q&&(e+="Q"),this._castlingAbility&K.k&&(e+="k"),this._castlingAbility&K.q&&(e+="q"),""===e?"-":e}},{key:"checkMate",value:function(e){var t=this,n=this.getKing(e);return!!ne(n.piece,this._board).isKingInCheck(e)&&0===this._board.getPieces(e).flatMap((function(e){return ne(e.piece,t._board).moves({rank:e.rank,file:e.file})})).length}},{key:"staleMate",value:function(e){var t=this;return 0===this._board.getPieces(e).flatMap((function(e){return ne(e.piece,t._board).moves({rank:e.rank,file:e.file})})).length}},{key:"changeState",value:function(){switch(this._state){case"BlackWin":case"StaleMate":case"WhiteWin":case"DrawRepition3":case"DrawRepition5":break;case"WhiteMove":this.checkMate("BLACK")?this._state="WhiteWin":this.staleMate("BLACK")?this._state="StaleMate":this._state="BlackMove";break;case"BlackMove":this.checkMate("WHITE")?this._state="BlackWin":this.staleMate("WHITE")?this._state="StaleMate":this._state="WhiteMove",this._fullMoves+=1}console.log(this._state)}}]),e}())),ve={board:ue.board,state:ue.state},fe=Object(i.createContext)([ve,function(){return null}]),de=function(e,t){switch(t.type){case"PIECE_HOVER":if(!e.activePiece)throw new Error("state is corrupted");return Object(v.a)(Object(v.a)({},e),{},{activePiece:Object(v.a)(Object(v.a)({},e.activePiece),{},{x:t.payload.x,y:t.payload.y})});case"PIECE_ACTIVATED":return Object(v.a)(Object(v.a)({},e),{},{activePiece:Object(v.a)({},t.payload)});case"SQUARE_ATTACKED":return Object(v.a)(Object(v.a)({},e),{},{threatenedSquare:Object(v.a)({},t.payload)});case"MOVE":if(!e.threatenedSquare)throw new Error("state is corrupted");if(!e.activePiece)throw new Error("state is corrupted");var n={file:e.activePiece.file,rank:e.activePiece.rank},i={file:e.threatenedSquare.file,rank:e.threatenedSquare.rank};return ue.move(n,i),{board:ue.board,state:ue.state}}},be=function(e){var t=e.children,n=Object(i.useReducer)(de,ve),c=Object(o.a)(n,2),r=c[0],a=c[1];return Object(h.jsx)(fe.Provider,{value:[r,a],children:t})},je=function(e){var t=e.rank,n=e.file,c=e.bound,r=Object(i.useRef)(null),a=Object(i.useContext)(fe),s=Object(o.a)(a,2),l=s[0],v=s[1],f=Object(i.useState)(!1),d=Object(o.a)(f,2),b=d[0],j=d[1],p=function(e,t){return e%2===0&&G.indexOf(t)%2===0||e%2===1&&G.indexOf(t)%2===1}(t,n),O=function(e,t,n){var i=n.getPieceAt({rank:e,file:t});if(i.piece){var c="WHITE"===i.piece.colour?H:B;switch(i.piece.pieceType){case"BISHOP":return c.Bishop;case"KING":return c.King;case"KNIGHT":return c.Knight;case"PAWN":return c.Pawn;case"QUEEN":return c.Queen;case"ROOK":return c.Rook}}}(t,n,l.board);Object(i.useEffect)((function(){var e,t=null===(e=r.current)||void 0===e?void 0:e.getBoundingClientRect();t&&(l.activePiece&&l.activePiece.x>=(null===t||void 0===t?void 0:t.left)&&l.activePiece.x<(null===t||void 0===t?void 0:t.right)&&l.activePiece.y>=t.top&&l.activePiece.y<t.bottom?j(!0):j(!1))}),[l,t,n]),Object(i.useEffect)((function(){b&&v({type:"SQUARE_ATTACKED",payload:{rank:t,file:n}})}),[b,v,n,t]);var g=Object(i.useCallback)((function(e,t){return v({type:"PIECE_HOVER",payload:{x:e,y:t}})}),[v]),k=Object(i.useCallback)((function(e,i){return v({type:"PIECE_ACTIVATED",payload:{rank:t,file:n,x:e,y:i}})}),[v,t,n]),w=Object(i.useCallback)((function(){return v({type:"MOVE"})}),[v]);return Object(h.jsxs)("div",{className:"".concat(R.a.chessSquare," ").concat(p?R.a.light:""," ").concat(b?R.a.highlighted:""," ").concat(R.a["rank_".concat(t)]," ").concat(R.a["file_".concat(n)]),rank:t,file:n,ref:r,children:[O&&Object(h.jsx)(u,{boundingBox:c,onMouseUp:w,onMouseMove:g,onMouseDown:k,children:Object(h.jsx)(O,{})}),1===t&&Object(h.jsx)("div",{className:R.a.rank,children:n}),"a"===n&&Object(h.jsx)("div",{className:R.a.file,children:t})]},t+n)},pe=function(e){switch(e){case"BlackMove":return"Black to move";case"BlackWin":return"Black Won!";case"StaleMate":return"Stalemate";case"WhiteMove":return"White to move";case"WhiteWin":return"White Won!";default:return e}},Oe=function(){var e=Object(i.useRef)(null),t=Object(i.useState)(),n=Object(o.a)(t,2),c=n[0],r=n[1],a=Object(i.useContext)(fe),s=Object(o.a)(a,1)[0],l=Object(i.useCallback)((function(){var t;r(null===(t=e.current)||void 0===t?void 0:t.getBoundingClientRect())}),[]);return ke(l),Object(i.useEffect)((function(){var t;r(null===(t=e.current)||void 0===t?void 0:t.getBoundingClientRect())}),[e]),Object(h.jsxs)("div",{className:R.a.container,children:[Object(h.jsx)("div",{ref:e,className:R.a.chessGrid,children:D.map((function(e){return G.map((function(t){return Object(h.jsx)(je,{rank:e,file:t,bound:c},e+t)}))}))}),Object(h.jsx)("div",{className:R.a.infoPane,children:pe(s.state)})]})};var ge=function(){return Object(h.jsx)(be,{children:Object(h.jsx)(Oe,{})})},ke=function(e){Object(i.useEffect)((function(){var t=function(){e()};return window.addEventListener("resize",t),t(),function(){return window.removeEventListener("resize",t)}}),[e])},we=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,22)).then((function(t){var n=t.getCLS,i=t.getFID,c=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),i(e),c(e),r(e),a(e)}))};a.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(ge,{})}),document.getElementById("root")),we()},9:function(e,t,n){e.exports={container:"App_container__3Hag2",chessGrid:"App_chessGrid__3cPOC",chessSquare:"App_chessSquare__SDQaO",light:"App_light__3AKuB",highlighted:"App_highlighted__19TOk",rank:"App_rank__3KL7s",file:"App_file__3wQ0V",infoPane:"App_infoPane__11ld2"}}},[[21,1,2]]]);
//# sourceMappingURL=main.08c12db0.chunk.js.map