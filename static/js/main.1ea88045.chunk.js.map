{"version":3,"sources":["components/draggable.tsx","components/classic_pieces/bishop_black.tsx","components/classic_pieces/bishop_white.tsx","components/classic_pieces/king_black.tsx","components/classic_pieces/king_white.tsx","components/classic_pieces/knight_black.tsx","components/classic_pieces/knight_white.tsx","components/classic_pieces/pawn_black.tsx","components/classic_pieces/pawn_white.tsx","components/classic_pieces/queen_black.tsx","components/classic_pieces/queen_white.tsx","components/classic_pieces/rook_black.tsx","components/classic_pieces/rook_white.tsx","components/classic_pieces/index.tsx","engine/board.ts","components/game-context.tsx","engine/initial-board.ts","App.tsx","reportWebVitals.ts","index.tsx","App.module.css"],"names":["Draggable","children","boundingBox","onMouseDown","onMouseMove","onMouseUp","useState","x","y","pressed","initial","setInitial","position","setPosition","ref","useRef","useEffect","current","style","transform","onMouseUpCallback","React","useCallback","onMouseMoveCallback","eventAction","ev","type","touches","Math","max","min","pageX","right","left","pageY","bottom","top","dx","dy","activeCallback","document","addEventListener","removeEventListener","onMouseDownCallback","box","getBoundingClientRect","initX","initY","width","height","onTouchStart","BishopBlack","props","xmlns","viewBox","fill","fillRule","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","BishopWhite","KingBlack","KingWhite","KnightBlack","KnightWhite","PawnBlack","PawnWhite","QueenBlack","cx","cy","r","QueenWhite","RookBlack","RookWhite","Black","King","Queen","Knight","Bishop","Pawn","Rook","White","RankArray","FileArray","KingInCheck","colour","board","kingPosition","find","piece","filter","flatMap","getValidMovesInternal","some","file","rank","getPawnValidMoves","getRookValidMoves","getBishopValidMoves","getQueenValidMoves","getKnightValidMoves","getKingValidMoves","Error","getPieceAt","startRank","increment","steps","validMoves","i","newRank","push","move","fileToCheck","indexOf","rankToCheck","leftFilePiece","pieceAt","length","newFile","concat","forEach","rankDelta","fileDelta","moved","every","potentialBoard","initialState","GameContext","createContext","reducer","state","action","activePiece","payload","threatenedSquare","movePosition","getValidMoves","console","log","m","rookFile","rookRank","board1","rookFileNew","GameContextProvider","useReducer","dispatch","Provider","value","GridPosition","bound","useContext","DraggableContext","inBound","setInBound","isLight","isLightSquare","Piece","currentBoard","piecePoistion","set","pieceHover","pieceActivated","className","styles","chessSquare","light","highlighted","Board","chessGrid","setBound","onWindowResize","useOnWindowResize","container","map","f","App","handleResize","window","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById","module","exports"],"mappings":"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","file":"static/js/main.1ea88045.chunk.js","sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\r\n\r\ntype Props = {\r\n  children: React.ReactNode;\r\n  boundingBox?: DOMRect;\r\n  onMouseDown?: (x: number, y: number) => void;\r\n  onMouseMove?: (x: number, y: number) => void;\r\n  onMouseUp?: (x: number, y: number) => void;\r\n};\r\n\r\nexport const Draggable = ({\r\n  children,\r\n  boundingBox,\r\n  onMouseDown,\r\n  onMouseMove,\r\n  onMouseUp,\r\n}: Props) => {\r\n  const [initial, setInitial] = useState({ x: 0, y: 0, pressed: false });\r\n  const [position, setPosition] = useState({ x: 0, y: 0 });\r\n  const ref = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (ref.current && initial.pressed) {\r\n      ref.current.style.transform = `translate(${position.x}px, ${position.y}px)`;\r\n    } else if (ref.current) {\r\n      ref.current.style.transform = \"\";\r\n    }\r\n  }, [position, initial.pressed]);\r\n\r\n  const onMouseUpCallback = React.useCallback((): void => {\r\n    setInitial({ x: 0, y: 0, pressed: false });\r\n    setPosition({ x: 0, y: 0 });\r\n    onMouseUp?.(-1, -1);\r\n  }, [onMouseUp]);\r\n\r\n  const onMouseMoveCallback = React.useCallback(\r\n    (eventAction: MouseEvent | TouchEvent): void => {\r\n      let ev;\r\n      if (eventAction.type === \"mousemove\") {\r\n        ev = eventAction as MouseEvent;\r\n      } else {\r\n        ev = (eventAction as TouchEvent).touches[0];\r\n      }\r\n\r\n      const x = boundingBox\r\n        ? Math.max(Math.min(ev.pageX, boundingBox.right), boundingBox.left)\r\n        : ev.pageX;\r\n      const y = boundingBox\r\n        ? Math.max(Math.min(ev.pageY, boundingBox.bottom), boundingBox.top)\r\n        : ev.pageY;\r\n\r\n      const dx = x - initial.x;\r\n      const dy = y - initial.y;\r\n\r\n      onMouseMove?.(x, y);\r\n      setPosition({\r\n        x: dx,\r\n        y: dy,\r\n      });\r\n    },\r\n    [initial, boundingBox, onMouseMove]\r\n  );\r\n  const activeCallback = useRef(onMouseMoveCallback);\r\n\r\n  useEffect(() => {\r\n    if (initial.pressed) {\r\n      activeCallback.current = onMouseMoveCallback;\r\n      document.addEventListener(\"mousemove\", onMouseMoveCallback);\r\n      document.addEventListener(\"mouseup\", onMouseUpCallback);\r\n      document.addEventListener(\"touchmove\", onMouseMoveCallback);\r\n      document.addEventListener(\"touchend\", onMouseUpCallback);\r\n    } else {\r\n      document.removeEventListener(\"mousemove\", activeCallback.current);\r\n      document.removeEventListener(\"mouseup\", onMouseUpCallback);\r\n      document.removeEventListener(\"touchmove\", activeCallback.current);\r\n      document.removeEventListener(\"touchend\", onMouseUpCallback);\r\n    }\r\n  }, [initial.pressed, onMouseMoveCallback, onMouseUpCallback]);\r\n\r\n  const onMouseDownCallback = (\r\n    eventAction: React.MouseEvent | React.TouchEvent\r\n  ) => {\r\n    let ev;\r\n    if (eventAction.type === \"mousedown\") {\r\n      ev = eventAction as React.MouseEvent;\r\n    } else {\r\n      ev = (eventAction as React.TouchEvent).touches[0];\r\n    }\r\n    const box = ref.current?.getBoundingClientRect();\r\n\r\n    let initX = ev.pageX;\r\n    let initY = ev.pageY;\r\n\r\n    if (box) {\r\n      initX = box?.x + box?.width / 2;\r\n      initY = box?.y + box?.height / 2;\r\n    }\r\n\r\n    const x = boundingBox\r\n      ? Math.max(Math.min(ev.pageX, boundingBox.right), boundingBox.left)\r\n      : ev.pageX;\r\n    const y = boundingBox\r\n      ? Math.max(Math.min(ev.pageY, boundingBox.bottom), boundingBox.top)\r\n      : ev.pageY;\r\n\r\n    const dx = x - initX;\r\n    const dy = y - initY;\r\n\r\n    setPosition({ x: dx, y: dy });\r\n    onMouseDown?.(x, y);\r\n    setInitial({ x: initX, y: initY, pressed: true });\r\n  };\r\n\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      onMouseDown={onMouseDownCallback}\r\n      onTouchStart={onMouseDownCallback}\r\n    >\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n","import * as React from \"react\";\r\n\r\nfunction BishopBlack(props: React.SVGProps<SVGSVGElement>) {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 45 45\"\r\n      {...props}\r\n    >\r\n      <g\r\n        fill=\"none\"\r\n        fillRule=\"evenodd\"\r\n        stroke=\"#000\"\r\n        strokeWidth={1.5}\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      >\r\n        <g fill=\"#000\" strokeLinecap=\"butt\">\r\n          <path d=\"M9 36c3.39-.97 10.11.43 13.5-2 3.39 2.43 10.11 1.03 13.5 2 0 0 1.65.54 3 2-.68.97-1.65.99-3 .5-3.39-.97-10.11.46-13.5-1-3.39 1.46-10.11.03-13.5 1-1.35.49-2.32.47-3-.5 1.35-1.46 3-2 3-2z\" />\r\n          <path d=\"M15 32c2.5 2.5 12.5 2.5 15 0 .5-1.5 0-2 0-2 0-2.5-2.5-4-2.5-4 5.5-1.5 6-11.5-5-15.5-11 4-10.5 14-5 15.5 0 0-2.5 1.5-2.5 4 0 0-.5.5 0 2z\" />\r\n          <path d=\"M25 8a2.5 2.5 0 11-5 0 2.5 2.5 0 115 0z\" />\r\n        </g>\r\n        <path\r\n          d=\"M17.5 26h10M15 30h15m-7.5-14.5v5M20 18h5\"\r\n          stroke=\"#fff\"\r\n          strokeLinejoin=\"miter\"\r\n        />\r\n      </g>\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default React.memo(BishopBlack);\r\n","import * as React from \"react\";\r\n\r\nfunction BishopWhite(props: React.SVGProps<SVGSVGElement>) {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 45 45\"\r\n      {...props}\r\n    >\r\n      <g\r\n        fill=\"none\"\r\n        fillRule=\"evenodd\"\r\n        stroke=\"#000\"\r\n        strokeWidth={1.5}\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      >\r\n        <g fill=\"#fff\" strokeLinecap=\"butt\">\r\n          <path d=\"M9 36c3.39-.97 10.11.43 13.5-2 3.39 2.43 10.11 1.03 13.5 2 0 0 1.65.54 3 2-.68.97-1.65.99-3 .5-3.39-.97-10.11.46-13.5-1-3.39 1.46-10.11.03-13.5 1-1.35.49-2.32.47-3-.5 1.35-1.46 3-2 3-2z\" />\r\n          <path d=\"M15 32c2.5 2.5 12.5 2.5 15 0 .5-1.5 0-2 0-2 0-2.5-2.5-4-2.5-4 5.5-1.5 6-11.5-5-15.5-11 4-10.5 14-5 15.5 0 0-2.5 1.5-2.5 4 0 0-.5.5 0 2z\" />\r\n          <path d=\"M25 8a2.5 2.5 0 11-5 0 2.5 2.5 0 115 0z\" />\r\n        </g>\r\n        <path\r\n          d=\"M17.5 26h10M15 30h15m-7.5-14.5v5M20 18h5\"\r\n          strokeLinejoin=\"miter\"\r\n        />\r\n      </g>\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default React.memo(BishopWhite);\r\n","import * as React from \"react\";\r\n\r\nfunction KingBlack(props: React.SVGProps<SVGSVGElement>) {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 45 45\"\r\n      {...props}\r\n    >\r\n      <g\r\n        fill=\"none\"\r\n        fillRule=\"evenodd\"\r\n        stroke=\"#000\"\r\n        strokeWidth={1.5}\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      >\r\n        <path d=\"M22.5 11.63V6\" strokeLinejoin=\"miter\" />\r\n        <path\r\n          d=\"M22.5 25s4.5-7.5 3-10.5c0 0-1-2.5-3-2.5s-3 2.5-3 2.5c-1.5 3 3 10.5 3 10.5\"\r\n          fill=\"#000\"\r\n          strokeLinecap=\"butt\"\r\n          strokeLinejoin=\"miter\"\r\n        />\r\n        <path\r\n          d=\"M12.5 37c5.5 3.5 14.5 3.5 20 0v-7s9-4.5 6-10.5c-4-6.5-13.5-3.5-16 4V27v-3.5c-2.5-7.5-12-10.5-16-4-3 6 6 10.5 6 10.5v7\"\r\n          fill=\"#000\"\r\n        />\r\n        <path d=\"M20 8h5\" strokeLinejoin=\"miter\" />\r\n        <path\r\n          d=\"M32 29.5s8.5-4 6.03-9.65C34.15 14 25 18 22.5 24.5v2.1-2.1C20 18 10.85 14 6.97 19.85 4.5 25.5 13 29.5 13 29.5\"\r\n          stroke=\"#fff\"\r\n        />\r\n        <path\r\n          d=\"M12.5 30c5.5-3 14.5-3 20 0m-20 3.5c5.5-3 14.5-3 20 0m-20 3.5c5.5-3 14.5-3 20 0\"\r\n          stroke=\"#fff\"\r\n        />\r\n      </g>\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default React.memo(KingBlack);\r\n","import * as React from \"react\";\r\n\r\nfunction KingWhite(props: React.SVGProps<SVGSVGElement>) {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 45 45\"\r\n      {...props}\r\n    >\r\n      <g\r\n        fill=\"none\"\r\n        fillRule=\"evenodd\"\r\n        stroke=\"#000\"\r\n        strokeWidth={1.5}\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      >\r\n        <path d=\"M22.5 11.63V6M20 8h5\" strokeLinejoin=\"miter\" />\r\n        <path\r\n          d=\"M22.5 25s4.5-7.5 3-10.5c0 0-1-2.5-3-2.5s-3 2.5-3 2.5c-1.5 3 3 10.5 3 10.5\"\r\n          fill=\"#fff\"\r\n          strokeLinecap=\"butt\"\r\n          strokeLinejoin=\"miter\"\r\n        />\r\n        <path\r\n          d=\"M12.5 37c5.5 3.5 14.5 3.5 20 0v-7s9-4.5 6-10.5c-4-6.5-13.5-3.5-16 4V27v-3.5c-2.5-7.5-12-10.5-16-4-3 6 6 10.5 6 10.5v7\"\r\n          fill=\"#fff\"\r\n        />\r\n        <path d=\"M12.5 30c5.5-3 14.5-3 20 0M12.5 33.5c5.5-3 14.5-3 20 0M12.5 37c5.5-3 14.5-3 20 0\" />\r\n      </g>\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default React.memo(KingWhite);\r\n","import * as React from \"react\";\r\n\r\nfunction KnightBlack(props: React.SVGProps<SVGSVGElement>) {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 45 45\"\r\n      {...props}\r\n    >\r\n      <g\r\n        fill=\"none\"\r\n        fillRule=\"evenodd\"\r\n        stroke=\"#000\"\r\n        strokeWidth={1.5}\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      >\r\n        <path d=\"M22 10c10.5 1 16.5 8 16 29H15c0-9 10-6.5 8-21\" fill=\"#000\" />\r\n        <path\r\n          d=\"M24 18c.38 2.91-5.55 7.37-8 9-3 2-2.82 4.34-5 4-1.042-.94 1.41-3.04 0-3-1 0 .19 1.23-1 2-1 0-4.003 1-4-4 0-2 6-12 6-12s1.89-1.9 2-3.5c-.73-.994-.5-2-.5-3 1-1 3 2.5 3 2.5h2s.78-1.992 2.5-3c1 0 1 3 1 3\"\r\n          fill=\"#000\"\r\n        />\r\n        <path\r\n          d=\"M9.5 25.5a.5.5 0 11-1 0 .5.5 0 111 0z\"\r\n          fill=\"#fff\"\r\n          stroke=\"#fff\"\r\n        />\r\n        <path\r\n          d=\"M14.933 15.75a.5 1.5 30 11-.866-.5.5 1.5 30 11.866.5z\"\r\n          fill=\"#fff\"\r\n          stroke=\"#fff\"\r\n          strokeWidth={1.49997}\r\n        />\r\n        <path\r\n          d=\"M24.55 10.4l-.45 1.45.5.15c3.15 1 5.65 2.49 7.9 6.75S35.75 29.06 35.25 39l-.05.5h2.25l.05-.5c.5-10.06-.88-16.85-3.25-21.34-2.37-4.49-5.79-6.64-9.19-7.16l-.51-.1z\"\r\n          fill=\"#fff\"\r\n          stroke=\"none\"\r\n        />\r\n      </g>\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default React.memo(KnightBlack);\r\n","import * as React from \"react\";\r\n\r\nfunction KnightWhite(props: React.SVGProps<SVGSVGElement>) {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 45 45\"\r\n      {...props}\r\n    >\r\n      <g\r\n        fill=\"none\"\r\n        fillRule=\"evenodd\"\r\n        stroke=\"#000\"\r\n        strokeWidth={1.5}\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      >\r\n        <path d=\"M22 10c10.5 1 16.5 8 16 29H15c0-9 10-6.5 8-21\" fill=\"#fff\" />\r\n        <path\r\n          d=\"M24 18c.38 2.91-5.55 7.37-8 9-3 2-2.82 4.34-5 4-1.042-.94 1.41-3.04 0-3-1 0 .19 1.23-1 2-1 0-4.003 1-4-4 0-2 6-12 6-12s1.89-1.9 2-3.5c-.73-.994-.5-2-.5-3 1-1 3 2.5 3 2.5h2s.78-1.992 2.5-3c1 0 1 3 1 3\"\r\n          fill=\"#fff\"\r\n        />\r\n        <path d=\"M9.5 25.5a.5.5 0 11-1 0 .5.5 0 111 0z\" fill=\"#000\" />\r\n        <path\r\n          d=\"M14.933 15.75a.5 1.5 30 11-.866-.5.5 1.5 30 11.866.5z\"\r\n          fill=\"#000\"\r\n          strokeWidth={1.49997}\r\n        />\r\n      </g>\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default React.memo(KnightWhite);\r\n","import * as React from \"react\";\r\n\r\nconst PawnBlack = (props: React.SVGProps<SVGSVGElement>) => {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 45 45\"\r\n      {...props}\r\n    >\r\n      <path\r\n        d=\"M22.5 9c-2.21 0-4 1.79-4 4 0 .89.29 1.71.78 2.38C17.33 16.5 16 18.59 16 21c0 2.03.94 3.84 2.41 5.03-3 1.06-7.41 5.55-7.41 13.47h23c0-7.92-4.41-12.41-7.41-13.47 1.47-1.19 2.41-3 2.41-5.03 0-2.41-1.33-4.5-3.28-5.62.49-.67.78-1.49.78-2.38 0-2.21-1.79-4-4-4z\"\r\n        stroke=\"#000\"\r\n        strokeWidth={1.5}\r\n        strokeLinecap=\"round\"\r\n      />\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport default React.memo(PawnBlack);\r\n","import * as React from \"react\";\r\n\r\nfunction PawnWhite(props: React.SVGProps<SVGSVGElement>) {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 45 45\"\r\n      {...props}\r\n    >\r\n      <path\r\n        d=\"M22.5 9c-2.21 0-4 1.79-4 4 0 .89.29 1.71.78 2.38C17.33 16.5 16 18.59 16 21c0 2.03.94 3.84 2.41 5.03-3 1.06-7.41 5.55-7.41 13.47h23c0-7.92-4.41-12.41-7.41-13.47 1.47-1.19 2.41-3 2.41-5.03 0-2.41-1.33-4.5-3.28-5.62.49-.67.78-1.49.78-2.38 0-2.21-1.79-4-4-4z\"\r\n        fill=\"#fff\"\r\n        stroke=\"#000\"\r\n        strokeWidth={1.5}\r\n        strokeLinecap=\"round\"\r\n      />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default React.memo(PawnWhite);\r\n","import * as React from \"react\";\r\n\r\nfunction QueenBlack(props: React.SVGProps<SVGSVGElement>) {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 45 45\"\r\n      {...props}\r\n    >\r\n      <g\r\n        stroke=\"#000\"\r\n        strokeWidth={1.5}\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      >\r\n        <path\r\n          d=\"M9 26c8.5-1.5 21-1.5 27 0l2.5-12.5L31 25l-.3-14.1-5.2 13.6-3-14.5-3 14.5-5.2-13.6L14 25 6.5 13.5 9 26z\"\r\n          strokeLinecap=\"butt\"\r\n        />\r\n        <path d=\"M9 26c0 2 1.5 2 2.5 4 1 1.5 1 1 .5 3.5-1.5 1-1 2.5-1 2.5-1.5 1.5 0 2.5 0 2.5 6.5 1 16.5 1 23 0 0 0 1.5-1 0-2.5 0 0 .5-1.5-1-2.5-.5-2.5-.5-2 .5-3.5 1-2 2.5-2 2.5-4-8.5-1.5-18.5-1.5-27 0zM11.5 30c3.5-1 18.5-1 22 0M12 33.5c6-1 15-1 21 0\" />\r\n        <circle cx={6} cy={12} r={2} />\r\n        <circle cx={14} cy={9} r={2} />\r\n        <circle cx={22.5} cy={8} r={2} />\r\n        <circle cx={31} cy={9} r={2} />\r\n        <circle cx={39} cy={12} r={2} />\r\n        <path d=\"M11 38.5a35 35 1 0023 0\" fill=\"none\" strokeLinecap=\"butt\" />\r\n        <g fill=\"none\" stroke=\"#fff\">\r\n          <path d=\"M11 29a35 35 1 0123 0M12.5 31.5h20M11.5 34.5a35 35 1 0022 0M10.5 37.5a35 35 1 0024 0\" />\r\n        </g>\r\n      </g>\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default React.memo(QueenBlack);\r\n","import * as React from \"react\";\r\n\r\nfunction QueenWhite(props: React.SVGProps<SVGSVGElement>) {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 45 45\"\r\n      {...props}\r\n    >\r\n      <g fill=\"#fff\" stroke=\"#000\" strokeWidth={1.5} strokeLinejoin=\"round\">\r\n        <path d=\"M9 26c8.5-1.5 21-1.5 27 0l2.5-12.5L31 25l-.3-14.1-5.2 13.6-3-14.5-3 14.5-5.2-13.6L14 25 6.5 13.5 9 26z\" />\r\n        <path d=\"M9 26c0 2 1.5 2 2.5 4 1 1.5 1 1 .5 3.5-1.5 1-1 2.5-1 2.5-1.5 1.5 0 2.5 0 2.5 6.5 1 16.5 1 23 0 0 0 1.5-1 0-2.5 0 0 .5-1.5-1-2.5-.5-2.5-.5-2 .5-3.5 1-2 2.5-2 2.5-4-8.5-1.5-18.5-1.5-27 0z\" />\r\n        <path\r\n          d=\"M11.5 30c3.5-1 18.5-1 22 0M12 33.5c6-1 15-1 21 0\"\r\n          fill=\"none\"\r\n        />\r\n        <circle cx={6} cy={12} r={2} />\r\n        <circle cx={14} cy={9} r={2} />\r\n        <circle cx={22.5} cy={8} r={2} />\r\n        <circle cx={31} cy={9} r={2} />\r\n        <circle cx={39} cy={12} r={2} />\r\n      </g>\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default React.memo(QueenWhite);\r\n","import * as React from \"react\";\r\n\r\nfunction RookBlack(props: React.SVGProps<SVGSVGElement>) {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 45 45\"\r\n      {...props}\r\n    >\r\n      <g\r\n        fillRule=\"evenodd\"\r\n        stroke=\"#000\"\r\n        strokeWidth={1.5}\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      >\r\n        <path\r\n          d=\"M9 39h27v-3H9v3zM12.5 32l1.5-2.5h17l1.5 2.5h-20zM12 36v-4h21v4H12z\"\r\n          strokeLinecap=\"butt\"\r\n        />\r\n        <path\r\n          d=\"M14 29.5v-13h17v13H14z\"\r\n          strokeLinecap=\"butt\"\r\n          strokeLinejoin=\"miter\"\r\n        />\r\n        <path\r\n          d=\"M14 16.5L11 14h23l-3 2.5H14zM11 14V9h4v2h5V9h5v2h5V9h4v5H11z\"\r\n          strokeLinecap=\"butt\"\r\n        />\r\n        <path\r\n          d=\"M12 35.5h21M13 31.5h19M14 29.5h17M14 16.5h17M11 14h23\"\r\n          fill=\"none\"\r\n          stroke=\"#fff\"\r\n          strokeWidth={1}\r\n          strokeLinejoin=\"miter\"\r\n        />\r\n      </g>\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default React.memo(RookBlack);\r\n","import * as React from \"react\";\r\n\r\nfunction RookWhite(props: React.SVGProps<SVGSVGElement>) {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      width=\"100%\"\r\n      height=\"100%\"\r\n      viewBox=\"0 0 45 45\"\r\n      {...props}\r\n    >\r\n      <g\r\n        fill=\"#fff\"\r\n        fillRule=\"evenodd\"\r\n        stroke=\"#000\"\r\n        strokeWidth={1.5}\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      >\r\n        <path\r\n          d=\"M9 39h27v-3H9v3zM12 36v-4h21v4H12zM11 14V9h4v2h5V9h5v2h5V9h4v5\"\r\n          strokeLinecap=\"butt\"\r\n        />\r\n        <path d=\"M34 14l-3 3H14l-3-3\" />\r\n        <path\r\n          d=\"M31 17v12.5H14V17\"\r\n          strokeLinecap=\"butt\"\r\n          strokeLinejoin=\"miter\"\r\n        />\r\n        <path d=\"M31 29.5l1.5 2.5h-20l1.5-2.5\" />\r\n        <path d=\"M11 14h23\" fill=\"none\" strokeLinejoin=\"miter\" />\r\n      </g>\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default React.memo(RookWhite);\r\n","import BishopBlack from \"./bishop_black\";\r\nimport BishopWhite from \"./bishop_white\";\r\nimport KingBlack from \"./king_black\";\r\nimport KingWhite from \"./king_white\";\r\nimport KnightBlack from \"./knight_black\";\r\nimport KnightWhite from \"./knight_white\";\r\nimport PawnBlack from \"./pawn_black\";\r\nimport PawnWhite from \"./pawn_white\";\r\nimport QueenBlack from \"./queen_black\";\r\nimport QueenWhite from \"./queen_white\";\r\nimport RookBlack from \"./rook_black\";\r\nimport RookWhite from \"./rook_white\";\r\n\r\nconst Black = {\r\n  King: KingBlack,\r\n  Queen: QueenBlack,\r\n  Knight: KnightBlack,\r\n  Bishop: BishopBlack,\r\n  Pawn: PawnBlack,\r\n  Rook: RookBlack,\r\n};\r\n\r\nconst White = {\r\n  King: KingWhite,\r\n  Queen: QueenWhite,\r\n  Knight: KnightWhite,\r\n  Bishop: BishopWhite,\r\n  Pawn: PawnWhite,\r\n  Rook: RookWhite,\r\n};\r\n\r\nexport { Black, White };\r\n","import {\r\n  File,\r\n  PiecePosition,\r\n  Position,\r\n  Rank,\r\n  StandardMove,\r\n  ValidMoves,\r\n} from \"./types\";\r\n\r\nexport const RankArray: Rank[] = [8, 7, 6, 5, 4, 3, 2, 1];\r\nexport const FileArray: File[] = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\"];\r\n\r\nexport const isLightSquare = (rank: Rank, file: File) => {\r\n  if (rank % 2 === 0 && FileArray.indexOf(file) % 2 === 0) {\r\n    return true;\r\n  } else if (rank % 2 === 1 && FileArray.indexOf(file) % 2 === 1) {\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\nexport const getValidMoves = (\r\n  piece: PiecePosition,\r\n  board: PiecePosition[]\r\n): ValidMoves => {\r\n  const potentialMoves = getValidMovesInternal(piece, board);\r\n\r\n  return potentialMoves.filter((move) => {\r\n    if (move.move === \"Castle\") {\r\n      return true;\r\n    }\r\n    const movePosition = move as Position;\r\n    const potentialBoard = board.filter(\r\n      (x) =>\r\n        !(\r\n          x.position.rank === piece.position.rank &&\r\n          x.position.file === piece.position.file\r\n        ) &&\r\n        !(\r\n          x.position.rank === movePosition.rank &&\r\n          x.position.file === movePosition.file\r\n        )\r\n    );\r\n\r\n    potentialBoard.push({\r\n      colour: piece?.colour,\r\n      piece: piece.piece,\r\n      moved: true,\r\n      position: {\r\n        rank: movePosition.rank,\r\n        file: movePosition.file,\r\n      },\r\n    });\r\n\r\n    return !KingInCheck(piece.colour, potentialBoard);\r\n  });\r\n};\r\n\r\nconst KingInCheck = (\r\n  colour: \"WHITE\" | \"BLACK\",\r\n  board: PiecePosition[]\r\n): Boolean => {\r\n  const kingPosition = board.find(\r\n    (x) => x.piece === \"KING\" && x.colour === colour\r\n  );\r\n\r\n  return board\r\n    .filter((x) => x.colour !== colour)\r\n    .flatMap((x) => getValidMovesInternal(x, board))\r\n    .some(\r\n      (x) =>\r\n        (x as Position).file === kingPosition?.position.file &&\r\n        (x as Position).rank === kingPosition?.position.rank\r\n    );\r\n};\r\n\r\nexport const getValidMovesInternal = (\r\n  piece: PiecePosition,\r\n  board: PiecePosition[]\r\n): ValidMoves => {\r\n  switch (piece.piece) {\r\n    case \"PAWN\":\r\n      return getPawnValidMoves(piece, board);\r\n    case \"ROOK\":\r\n      return getRookValidMoves(piece, board);\r\n    case \"BISHOP\":\r\n      return getBishopValidMoves(piece, board);\r\n    case \"QUEEN\":\r\n      return getQueenValidMoves(piece, board);\r\n    case \"KNIGHT\":\r\n      return getKnightValidMoves(piece, board);\r\n    case \"KING\":\r\n      return getKingValidMoves(piece, board);\r\n    default:\r\n      throw Error(\"nope\");\r\n  }\r\n};\r\n\r\nconst getPieceAt = (position: Position, board: PiecePosition[]) => {\r\n  return board.find(\r\n    (x) =>\r\n      x.position.rank === position.rank && x.position.file === position?.file\r\n  );\r\n};\r\n\r\nconst getPawnValidMoves = (\r\n  piece: PiecePosition,\r\n  board: PiecePosition[]\r\n): StandardMove[] => {\r\n  const startRank = piece.colour === \"WHITE\" ? 2 : 7;\r\n  const increment = piece.colour === \"WHITE\" ? 1 : -1;\r\n  const steps = piece.position.rank === startRank ? 2 : 1;\r\n\r\n  const validMoves: StandardMove[] = [];\r\n  for (let i = 1; i <= steps; i++) {\r\n    const newRank = (piece.position.rank + i * increment) as Rank;\r\n\r\n    if (newRank) {\r\n      const pieceAt = getPieceAt(\r\n        { rank: newRank, file: piece?.position.file },\r\n        board\r\n      );\r\n\r\n      if (pieceAt) {\r\n        break;\r\n      }\r\n\r\n      validMoves.push({\r\n        move: \"Move\",\r\n        rank: newRank,\r\n        file: piece.position.file,\r\n      });\r\n    }\r\n  }\r\n\r\n  if (piece.position.file !== \"a\") {\r\n    const fileToCheck = FileArray[FileArray.indexOf(piece.position.file) - 1];\r\n    const rankToCheck = (piece.position.rank + 1 * increment) as Rank;\r\n\r\n    const leftFilePiece = getPieceAt(\r\n      { rank: rankToCheck, file: fileToCheck },\r\n      board\r\n    );\r\n\r\n    if (leftFilePiece && leftFilePiece.colour !== piece.colour) {\r\n      validMoves.push({\r\n        move: \"Move\",\r\n        rank: rankToCheck,\r\n        file: fileToCheck,\r\n      });\r\n    }\r\n  }\r\n\r\n  if (piece.position.file !== \"h\") {\r\n    const fileToCheck = FileArray[FileArray.indexOf(piece.position.file) + 1];\r\n    const rankToCheck = (piece.position.rank + 1 * increment) as Rank;\r\n\r\n    const leftFilePiece = getPieceAt(\r\n      { rank: rankToCheck, file: fileToCheck },\r\n      board\r\n    );\r\n\r\n    if (leftFilePiece && leftFilePiece.colour !== piece.colour) {\r\n      validMoves.push({\r\n        move: \"Move\",\r\n        rank: rankToCheck,\r\n        file: fileToCheck,\r\n      });\r\n    }\r\n  }\r\n\r\n  //TODO: EN-Passant\r\n  return validMoves;\r\n};\r\n\r\nconst getRookValidMoves = (\r\n  piece: PiecePosition,\r\n  board: PiecePosition[]\r\n): StandardMove[] => {\r\n  const validMoves: StandardMove[] = [];\r\n  //left\r\n  for (let i = FileArray.indexOf(piece.position.file) - 1; i >= 0; i--) {\r\n    const pieceAt = getPieceAt(\r\n      { rank: piece.position.rank, file: FileArray[i] },\r\n      board\r\n    );\r\n\r\n    if (pieceAt && pieceAt.colour !== piece.colour) {\r\n      validMoves.push({\r\n        move: \"Move\",\r\n        rank: piece.position.rank,\r\n        file: FileArray[i],\r\n      });\r\n      break;\r\n    } else if (pieceAt) {\r\n      break;\r\n    } else {\r\n      validMoves.push({\r\n        move: \"Move\",\r\n        rank: piece.position.rank,\r\n        file: FileArray[i],\r\n      });\r\n    }\r\n  }\r\n  //right\r\n  for (\r\n    let i = FileArray.indexOf(piece.position.file) + 1;\r\n    i < FileArray.length;\r\n    i++\r\n  ) {\r\n    const pieceAt = getPieceAt(\r\n      { rank: piece.position.rank, file: FileArray[i] },\r\n      board\r\n    );\r\n\r\n    if (pieceAt && pieceAt.colour !== piece.colour) {\r\n      validMoves.push({\r\n        move: \"Move\",\r\n        rank: piece.position.rank,\r\n        file: FileArray[i],\r\n      });\r\n      break;\r\n    } else if (pieceAt) {\r\n      break;\r\n    } else {\r\n      validMoves.push({\r\n        move: \"Move\",\r\n        rank: piece.position.rank,\r\n        file: FileArray[i],\r\n      });\r\n    }\r\n  }\r\n  //up\r\n  for (let i = piece.position.rank + 1; i <= RankArray.length; i++) {\r\n    const pieceAt = getPieceAt(\r\n      { rank: i as Rank, file: piece.position.file },\r\n      board\r\n    );\r\n\r\n    if (pieceAt && pieceAt.colour !== piece.colour) {\r\n      validMoves.push({\r\n        move: \"Move\",\r\n        rank: i as Rank,\r\n        file: piece.position.file,\r\n      });\r\n      break;\r\n    } else if (pieceAt) {\r\n      break;\r\n    } else {\r\n      validMoves.push({\r\n        move: \"Move\",\r\n        rank: i as Rank,\r\n        file: piece.position.file,\r\n      });\r\n    }\r\n  }\r\n  //down\r\n  for (let i = piece.position.rank - 1; i >= 0; i--) {\r\n    const pieceAt = getPieceAt(\r\n      { rank: i as Rank, file: piece.position.file },\r\n      board\r\n    );\r\n\r\n    if (pieceAt && pieceAt.colour !== piece.colour) {\r\n      validMoves.push({\r\n        move: \"Move\",\r\n        rank: i as Rank,\r\n        file: piece.position.file,\r\n      });\r\n      break;\r\n    } else if (pieceAt) {\r\n      break;\r\n    } else {\r\n      validMoves.push({\r\n        move: \"Move\",\r\n        rank: i as Rank,\r\n        file: piece.position.file,\r\n      });\r\n    }\r\n  }\r\n  return validMoves;\r\n};\r\n\r\nconst getBishopValidMoves = (\r\n  piece: PiecePosition,\r\n  board: PiecePosition[]\r\n): StandardMove[] => {\r\n  const validMoves: StandardMove[] = [];\r\n\r\n  const file = FileArray.indexOf(piece.position.file);\r\n  const rank = piece.position.rank;\r\n\r\n  for (let i = 1; i < 8; i++) {\r\n    const newFile = file - i;\r\n    const newRank = rank - i;\r\n\r\n    if (newRank < 1 || newFile < 0) {\r\n      break;\r\n    }\r\n    const pieceAt = getPieceAt(\r\n      { rank: newRank as Rank, file: FileArray[newFile] },\r\n      board\r\n    );\r\n\r\n    if (pieceAt && pieceAt.colour !== piece.colour) {\r\n      validMoves.push({\r\n        move: \"Move\",\r\n        rank: newRank as Rank,\r\n        file: FileArray[newFile],\r\n      });\r\n      break;\r\n    } else if (pieceAt) {\r\n      break;\r\n    } else {\r\n      validMoves.push({\r\n        move: \"Move\",\r\n        rank: newRank as Rank,\r\n        file: FileArray[newFile],\r\n      });\r\n    }\r\n  }\r\n  for (let i = 1; i < 8; i++) {\r\n    const newFile = file - i;\r\n    const newRank = rank + i;\r\n\r\n    if (newRank > 8 || newFile < 0) {\r\n      break;\r\n    }\r\n    const pieceAt = getPieceAt(\r\n      { rank: newRank as Rank, file: FileArray[newFile] },\r\n      board\r\n    );\r\n\r\n    if (pieceAt && pieceAt.colour !== piece.colour) {\r\n      validMoves.push({\r\n        move: \"Move\",\r\n        rank: newRank as Rank,\r\n        file: FileArray[newFile],\r\n      });\r\n      break;\r\n    } else if (pieceAt) {\r\n      break;\r\n    } else {\r\n      validMoves.push({\r\n        move: \"Move\",\r\n        rank: newRank as Rank,\r\n        file: FileArray[newFile],\r\n      });\r\n    }\r\n  }\r\n\r\n  for (let i = 1; i < 8; i++) {\r\n    const newFile = file + i;\r\n    const newRank = rank - i;\r\n\r\n    if (newRank < 1 || newFile > 7) {\r\n      break;\r\n    }\r\n    const pieceAt = getPieceAt(\r\n      { rank: newRank as Rank, file: FileArray[newFile] },\r\n      board\r\n    );\r\n\r\n    if (pieceAt && pieceAt.colour !== piece.colour) {\r\n      validMoves.push({\r\n        move: \"Move\",\r\n        rank: newRank as Rank,\r\n        file: FileArray[newFile],\r\n      });\r\n      break;\r\n    } else if (pieceAt) {\r\n      break;\r\n    } else {\r\n      validMoves.push({\r\n        move: \"Move\",\r\n        rank: newRank as Rank,\r\n        file: FileArray[newFile],\r\n      });\r\n    }\r\n  }\r\n\r\n  for (let i = 1; i < 8; i++) {\r\n    const newFile = file + i;\r\n    const newRank = rank + i;\r\n\r\n    if (newRank > 8 || newFile > 7) {\r\n      break;\r\n    }\r\n    const pieceAt = getPieceAt(\r\n      { rank: newRank as Rank, file: FileArray[newFile] },\r\n      board\r\n    );\r\n\r\n    if (pieceAt && pieceAt.colour !== piece.colour) {\r\n      validMoves.push({\r\n        move: \"Move\",\r\n        rank: newRank as Rank,\r\n        file: FileArray[newFile],\r\n      });\r\n      break;\r\n    } else if (pieceAt) {\r\n      break;\r\n    } else {\r\n      validMoves.push({\r\n        move: \"Move\",\r\n        rank: newRank as Rank,\r\n        file: FileArray[newFile],\r\n      });\r\n    }\r\n  }\r\n  return validMoves;\r\n};\r\n\r\n// Queen = Bishop + Rook\r\nconst getQueenValidMoves = (\r\n  piece: PiecePosition,\r\n  board: PiecePosition[]\r\n): StandardMove[] => {\r\n  return getRookValidMoves(piece, board).concat(\r\n    getBishopValidMoves(piece, board)\r\n  );\r\n};\r\n\r\nconst getKnightValidMoves = (\r\n  piece: PiecePosition,\r\n  board: PiecePosition[]\r\n): StandardMove[] => {\r\n  const validMoves: StandardMove[] = [];\r\n  const moveDeltas = [\r\n    [1, 2],\r\n    [2, 1],\r\n    [-1, 2],\r\n    [-2, 1],\r\n    [-1, -2],\r\n    [-2, -1],\r\n    [1, -2],\r\n    [2, -1],\r\n  ];\r\n\r\n  const file = FileArray.indexOf(piece.position.file);\r\n  const rank = piece.position.rank;\r\n\r\n  moveDeltas.forEach(([rankDelta, fileDelta]) => {\r\n    const newFile = file + fileDelta;\r\n    const newRank = rank + rankDelta;\r\n    if (newRank > 8 || newFile > 7 || newRank < 1 || newFile < 0) {\r\n      return;\r\n    }\r\n\r\n    const pieceAt = getPieceAt(\r\n      { rank: newRank as Rank, file: FileArray[newFile] },\r\n      board\r\n    );\r\n\r\n    if (pieceAt && pieceAt.colour !== piece.colour) {\r\n      validMoves.push({\r\n        move: \"Move\",\r\n        rank: newRank as Rank,\r\n        file: FileArray[newFile],\r\n      });\r\n      return;\r\n    } else if (pieceAt) {\r\n      return;\r\n    } else {\r\n      validMoves.push({\r\n        move: \"Move\",\r\n        rank: newRank as Rank,\r\n        file: FileArray[newFile],\r\n      });\r\n    }\r\n  });\r\n\r\n  return validMoves;\r\n};\r\n\r\nconst getKingValidMoves = (\r\n  piece: PiecePosition,\r\n  board: PiecePosition[]\r\n): ValidMoves => {\r\n  const validMoves: ValidMoves = [];\r\n  const moveDeltas = [\r\n    [1, 1],\r\n    [0, 1],\r\n    [1, 0],\r\n    [-1, 0],\r\n    [-1, -1],\r\n    [0, -1],\r\n    [-1, 1],\r\n    [1, -1],\r\n  ];\r\n\r\n  const file = FileArray.indexOf(piece.position.file);\r\n  const rank = piece.position.rank;\r\n\r\n  moveDeltas.forEach(([rankDelta, fileDelta]) => {\r\n    const newFile = file + fileDelta;\r\n    const newRank = rank + rankDelta;\r\n    if (newRank > 8 || newFile > 7 || newRank < 1 || newFile < 0) {\r\n      return;\r\n    }\r\n\r\n    const pieceAt = getPieceAt(\r\n      { rank: newRank as Rank, file: FileArray[newFile] },\r\n      board\r\n    );\r\n\r\n    if (pieceAt && pieceAt.colour !== piece.colour) {\r\n      validMoves.push({\r\n        move: \"Move\",\r\n        rank: newRank as Rank,\r\n        file: FileArray[newFile],\r\n      });\r\n      return;\r\n    } else if (pieceAt) {\r\n      return;\r\n    } else {\r\n      validMoves.push({\r\n        move: \"Move\",\r\n        rank: newRank as Rank,\r\n        file: FileArray[newFile],\r\n      });\r\n    }\r\n  });\r\n\r\n  //TODO Castling\r\n\r\n  //short Castle.\r\n  const colour = piece.colour;\r\n  const shortRook = board.find(\r\n    (x) =>\r\n      x.piece === \"ROOK\" &&\r\n      x.colour === colour &&\r\n      x.position.file === \"h\" &&\r\n      x.moved === false\r\n  );\r\n\r\n  if (shortRook && !piece.moved) {\r\n    const moveDeltas = [\r\n      [0, 0],\r\n      [0, 1],\r\n      [0, 2],\r\n    ];\r\n\r\n    const canShortCastle = moveDeltas.every(([rankDelta, fileDelta]) => {\r\n      const newFile = file + fileDelta;\r\n      const newRank = rank + rankDelta;\r\n\r\n      const pieceAt = board.find(\r\n        (x) =>\r\n          x.position.file === FileArray[newFile] && x.position.rank === newRank\r\n      );\r\n      if (!pieceAt || (rankDelta === 0 && fileDelta === 0)) {\r\n        const potentialBoard = board.filter(\r\n          (x) =>\r\n            !(\r\n              x.position.rank === piece.position.rank &&\r\n              x.position.file === piece.position.file\r\n            )\r\n        );\r\n\r\n        potentialBoard.push({\r\n          colour: piece?.colour,\r\n          piece: piece.piece,\r\n          moved: true,\r\n          position: {\r\n            rank: newRank as Rank,\r\n            file: FileArray[newFile],\r\n          },\r\n        });\r\n\r\n        return !KingInCheck(piece.colour, potentialBoard);\r\n      }\r\n      return false;\r\n    });\r\n\r\n    if (canShortCastle)\r\n      validMoves.push({\r\n        move: \"Castle\",\r\n        type: \"SHORT\",\r\n        colour: piece.colour,\r\n        rank: rank,\r\n        file: FileArray[file + 2],\r\n      });\r\n  }\r\n\r\n  //short Castle.\r\n  const longRook = board.find(\r\n    (x) =>\r\n      x.piece === \"ROOK\" &&\r\n      x.colour === colour &&\r\n      x.position.file === \"a\" &&\r\n      x.moved === false\r\n  );\r\n\r\n  if (longRook && !piece.moved) {\r\n    const moveDeltas = [\r\n      [0, 0],\r\n      [0, -1],\r\n      [0, -2],\r\n    ];\r\n\r\n    const canLongCastle = moveDeltas.every(([rankDelta, fileDelta]) => {\r\n      const newFile = file + fileDelta;\r\n      const newRank = rank + rankDelta;\r\n\r\n      const pieceAt = board.find(\r\n        (x) =>\r\n          x.position.file === FileArray[newFile] && x.position.rank === newRank\r\n      );\r\n      if (!pieceAt || (rankDelta === 0 && fileDelta === 0)) {\r\n        const potentialBoard = board.filter(\r\n          (x) =>\r\n            !(\r\n              x.position.rank === piece.position.rank &&\r\n              x.position.file === piece.position.file\r\n            )\r\n        );\r\n\r\n        potentialBoard.push({\r\n          colour: piece?.colour,\r\n          piece: piece.piece,\r\n          moved: true,\r\n          position: {\r\n            rank: newRank as Rank,\r\n            file: FileArray[newFile],\r\n          },\r\n        });\r\n\r\n        return !KingInCheck(piece.colour, potentialBoard);\r\n      }\r\n      return false;\r\n    });\r\n\r\n    if (canLongCastle)\r\n      validMoves.push({\r\n        move: \"Castle\",\r\n        type: \"LONG\",\r\n        colour: piece.colour,\r\n        rank: rank,\r\n        file: FileArray[file - 2],\r\n      });\r\n  }\r\n\r\n  return validMoves;\r\n};\r\n","import React, { useReducer, createContext, Dispatch } from \"react\";\r\nimport { getValidMoves } from \"../engine/board\";\r\nimport InitialBoard from \"../engine/initial-board\";\r\nimport { File, PiecePosition, Rank } from \"../engine/types\";\r\n\r\nconst initialState: State = { board: InitialBoard };\r\n\r\nconst GameContext = createContext<[State, Dispatch<Action>]>([\r\n  initialState,\r\n  () => null,\r\n]);\r\n\r\ntype State = {\r\n  activePiece?: ActivePiece;\r\n  threatenedSquare?: { rank: Rank; file: File };\r\n  board: PiecePosition[];\r\n};\r\n\r\ntype ActivePiece = {\r\n  rank: Rank;\r\n  file: File;\r\n  x: number;\r\n  y: number;\r\n};\r\n\r\ntype Action =\r\n  | { type: \"PIECE_HOVER\"; payload: { x: number; y: number } }\r\n  | {\r\n      type: \"PIECE_ACTIVATED\";\r\n      payload: { rank: Rank; file: File; x: number; y: number };\r\n    }\r\n  | {\r\n      type: \"SQUARE_ATTACKED\";\r\n      payload: { rank: Rank; file: File };\r\n    }\r\n  | { type: \"MOVE\" };\r\n\r\nconst reducer = (state: State, action: Action): State => {\r\n  switch (action.type) {\r\n    case \"PIECE_HOVER\": {\r\n      if (!state.activePiece) throw new Error(\"state is corrupted\");\r\n\r\n      return {\r\n        ...state,\r\n        activePiece: {\r\n          ...state.activePiece,\r\n          x: action.payload.x,\r\n          y: action.payload.y,\r\n        },\r\n      };\r\n    }\r\n    case \"PIECE_ACTIVATED\":\r\n      return {\r\n        ...state,\r\n        activePiece: {\r\n          ...action.payload,\r\n        },\r\n      };\r\n    case \"SQUARE_ATTACKED\":\r\n      return {\r\n        ...state,\r\n        threatenedSquare: {\r\n          ...action.payload,\r\n        },\r\n      };\r\n    case \"MOVE\": {\r\n      if (!state.threatenedSquare) throw new Error(\"state is corrupted\");\r\n      if (!state.activePiece) throw new Error(\"state is corrupted\");\r\n      //Get moving piece\r\n      const piece = state.board.find(\r\n        (x) =>\r\n          x.position.rank === state.activePiece?.rank &&\r\n          x.position.file === state.activePiece?.file\r\n      );\r\n\r\n      if (!piece) throw new Error(\"state is corrupted\");\r\n\r\n      const validMoves = getValidMoves(piece, state.board);\r\n\r\n      console.log(validMoves);\r\n\r\n      const move = validMoves.find(\r\n        (m) =>\r\n          m.file === state.threatenedSquare?.file &&\r\n          m.rank === state.threatenedSquare?.rank\r\n      );\r\n\r\n      if (!move) {\r\n        return {\r\n          board: state.board,\r\n        };\r\n      }\r\n\r\n      switch (move.move) {\r\n        case \"Castle\":\r\n          console.log(move);\r\n          const rookFile = move.type === \"SHORT\" ? \"h\" : \"a\";\r\n          const rookRank = move.colour === \"WHITE\" ? 1 : 8;\r\n\r\n          const board1 = state.board.filter(\r\n            (x) =>\r\n              !(\r\n                x.position.rank === state.activePiece?.rank &&\r\n                x.position.file === state.activePiece?.file\r\n              ) &&\r\n              !(x.position.rank === rookRank && x.position.file === rookFile)\r\n          );\r\n\r\n          const rookFileNew = move.type === \"SHORT\" ? \"f\" : \"d\";\r\n\r\n          board1.push({\r\n            colour: piece?.colour,\r\n            piece: \"ROOK\",\r\n            moved: true,\r\n            position: {\r\n              rank: rookRank,\r\n              file: rookFileNew,\r\n            },\r\n          });\r\n\r\n          board1.push({\r\n            colour: piece?.colour,\r\n            piece: piece.piece,\r\n            moved: true,\r\n            position: {\r\n              rank: state.threatenedSquare?.rank,\r\n              file: state.threatenedSquare?.file,\r\n            },\r\n          });\r\n          return {\r\n            board: board1,\r\n          };\r\n        case \"Move\":\r\n          const board = state.board.filter(\r\n            (x) =>\r\n              !(\r\n                x.position.rank === state.activePiece?.rank &&\r\n                x.position.file === state.activePiece?.file\r\n              ) &&\r\n              !(\r\n                x.position.rank === state.threatenedSquare?.rank &&\r\n                x.position.file === state.threatenedSquare?.file\r\n              )\r\n          );\r\n\r\n          board.push({\r\n            colour: piece?.colour,\r\n            piece: piece.piece,\r\n            moved: true,\r\n            position: {\r\n              rank: state.threatenedSquare?.rank,\r\n              file: state.threatenedSquare?.file,\r\n            },\r\n          });\r\n\r\n          return {\r\n            board,\r\n          };\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\ntype props = {\r\n  children: React.ReactNode;\r\n};\r\n\r\nconst GameContextProvider = ({ children }: props) => {\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n\r\n  return (\r\n    <GameContext.Provider value={[state, dispatch]}>\r\n      {children}\r\n    </GameContext.Provider>\r\n  );\r\n};\r\n\r\nexport {\r\n  GameContextProvider as DraggableContextProvider,\r\n  GameContext as DraggableContext,\r\n};\r\n","import { PiecePosition } from \"./types\";\r\n\r\nconst InitialBoard: PiecePosition[] = [\r\n  {\r\n    position: { rank: 1, file: \"a\" },\r\n    piece: \"ROOK\",\r\n    colour: \"WHITE\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: { rank: 1, file: \"b\" },\r\n    piece: \"KNIGHT\",\r\n    colour: \"WHITE\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: { rank: 1, file: \"c\" },\r\n    piece: \"BISHOP\",\r\n    colour: \"WHITE\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: { rank: 1, file: \"d\" },\r\n    piece: \"QUEEN\",\r\n    colour: \"WHITE\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: { rank: 1, file: \"e\" },\r\n    piece: \"KING\",\r\n    colour: \"WHITE\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: { rank: 1, file: \"f\" },\r\n    piece: \"BISHOP\",\r\n    colour: \"WHITE\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: { rank: 1, file: \"g\" },\r\n    piece: \"KNIGHT\",\r\n    colour: \"WHITE\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: { rank: 1, file: \"h\" },\r\n    piece: \"ROOK\",\r\n    colour: \"WHITE\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: { rank: 2, file: \"a\" },\r\n    piece: \"PAWN\",\r\n    colour: \"WHITE\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: { rank: 2, file: \"b\" },\r\n    piece: \"PAWN\",\r\n    colour: \"WHITE\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: { rank: 2, file: \"c\" },\r\n    piece: \"PAWN\",\r\n    colour: \"WHITE\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: { rank: 2, file: \"d\" },\r\n    piece: \"PAWN\",\r\n    colour: \"WHITE\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: { rank: 2, file: \"e\" },\r\n    piece: \"PAWN\",\r\n    colour: \"WHITE\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: { rank: 2, file: \"f\" },\r\n    piece: \"PAWN\",\r\n    colour: \"WHITE\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: { rank: 2, file: \"g\" },\r\n    piece: \"PAWN\",\r\n    colour: \"WHITE\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: { rank: 2, file: \"h\" },\r\n    piece: \"PAWN\",\r\n    colour: \"WHITE\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: { rank: 8, file: \"a\" },\r\n    piece: \"ROOK\",\r\n    colour: \"BLACK\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: { rank: 8, file: \"b\" },\r\n    piece: \"KNIGHT\",\r\n    colour: \"BLACK\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: { rank: 8, file: \"c\" },\r\n    piece: \"BISHOP\",\r\n    colour: \"BLACK\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: { rank: 8, file: \"d\" },\r\n    piece: \"QUEEN\",\r\n    colour: \"BLACK\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: { rank: 8, file: \"e\" },\r\n    piece: \"KING\",\r\n    colour: \"BLACK\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: { rank: 8, file: \"f\" },\r\n    piece: \"BISHOP\",\r\n    colour: \"BLACK\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: { rank: 8, file: \"g\" },\r\n    piece: \"KNIGHT\",\r\n    colour: \"BLACK\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: { rank: 8, file: \"h\" },\r\n    piece: \"ROOK\",\r\n    colour: \"BLACK\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: { rank: 7, file: \"a\" },\r\n    piece: \"PAWN\",\r\n    colour: \"BLACK\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: { rank: 7, file: \"b\" },\r\n    piece: \"PAWN\",\r\n    colour: \"BLACK\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: { rank: 7, file: \"c\" },\r\n    piece: \"PAWN\",\r\n    colour: \"BLACK\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: { rank: 7, file: \"d\" },\r\n    piece: \"PAWN\",\r\n    colour: \"BLACK\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: { rank: 7, file: \"e\" },\r\n    piece: \"PAWN\",\r\n    colour: \"BLACK\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: { rank: 7, file: \"f\" },\r\n    piece: \"PAWN\",\r\n    colour: \"BLACK\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: { rank: 7, file: \"g\" },\r\n    piece: \"PAWN\",\r\n    colour: \"BLACK\",\r\n    moved: false,\r\n  },\r\n  {\r\n    position: {\r\n      rank: 7,\r\n      file: \"h\",\r\n    },\r\n    piece: \"PAWN\",\r\n    colour: \"BLACK\",\r\n    moved: false,\r\n  },\r\n];\r\n\r\nexport default InitialBoard;\r\n","import React, { useState } from \"react\";\nimport \"./App.css\";\nimport { Draggable } from \"./components/draggable\";\nimport { Black, White } from \"./components/classic_pieces\";\nimport styles from \"./App.module.css\";\nimport { useRef } from \"react\";\nimport { useEffect } from \"react\";\nimport { useCallback } from \"react\";\nimport {\n  DraggableContext,\n  DraggableContextProvider,\n} from \"./components/game-context\";\nimport { useContext } from \"react\";\nimport { File, PiecePosition, Rank } from \"./engine/types\";\nimport { FileArray, isLightSquare, RankArray } from \"./engine/board\";\n\nconst getPieceAt = (rank: Rank, file: File, currentBoard: PiecePosition[]) => {\n  const piecePoistion = currentBoard.find(\n    (x) => x.position.file === file && x.position.rank === rank\n  );\n\n  if (piecePoistion) {\n    const set = piecePoistion.colour === \"WHITE\" ? White : Black;\n    switch (piecePoistion.piece) {\n      case \"BISHOP\":\n        return set.Bishop;\n      case \"KING\":\n        return set.King;\n      case \"KNIGHT\":\n        return set.Knight;\n      case \"PAWN\":\n        return set.Pawn;\n      case \"QUEEN\":\n        return set.Queen;\n      case \"ROOK\":\n        return set.Rook;\n    }\n  }\n};\n\ntype gridProps = {\n  rank: Rank;\n  file: File;\n  bound: DOMRect | undefined;\n};\n\nconst GridPosition = ({ rank, file, bound }: gridProps) => {\n  const ref = useRef<HTMLDivElement>(null);\n  const [state, dispatch] = useContext(DraggableContext);\n  const [inBound, setInBound] = useState(false);\n  const isLight = isLightSquare(rank, file);\n  const Piece = getPieceAt(rank, file, state.board);\n\n  useEffect(() => {\n    const bound = ref.current?.getBoundingClientRect();\n\n    if (bound) {\n      if (\n        state.activePiece &&\n        state.activePiece.x >= bound?.left &&\n        state.activePiece.x < bound?.right &&\n        state.activePiece.y >= bound.top &&\n        state.activePiece.y < bound.bottom\n      ) {\n        setInBound(true);\n      } else {\n        setInBound(false);\n      }\n    }\n  }, [state, rank, file]);\n\n  useEffect(() => {\n    if (inBound) {\n      dispatch({ type: \"SQUARE_ATTACKED\", payload: { rank, file } });\n    }\n  }, [inBound, dispatch, file, rank]);\n\n  const pieceHover = useCallback(\n    (x, y) => dispatch({ type: \"PIECE_HOVER\", payload: { x, y } }),\n    [dispatch]\n  );\n\n  const pieceActivated = useCallback(\n    (x, y) =>\n      dispatch({ type: \"PIECE_ACTIVATED\", payload: { rank, file, x, y } }),\n    [dispatch, rank, file]\n  );\n\n  const move = useCallback(() => dispatch({ type: \"MOVE\" }), [dispatch]);\n\n  return (\n    <div\n      className={`${styles.chessSquare} ${isLight ? styles.light : \"\"} ${\n        inBound ? styles.highlighted : \"\"\n      }`}\n      //@ts-ignore\n      rank={rank}\n      file={file}\n      key={rank + file}\n      ref={ref}\n    >\n      {Piece && (\n        <Draggable\n          boundingBox={bound}\n          onMouseUp={move}\n          onMouseMove={pieceHover}\n          onMouseDown={pieceActivated}\n        >\n          <Piece />\n        </Draggable>\n      )}\n    </div>\n  );\n};\n\nconst Board = () => {\n  const chessGrid = useRef<HTMLDivElement>(null);\n  const [bound, setBound] = useState<DOMRect>();\n\n  const onWindowResize = useCallback(() => {\n    setBound(chessGrid.current?.getBoundingClientRect());\n  }, []);\n\n  useOnWindowResize(onWindowResize);\n\n  useEffect(() => {\n    setBound(chessGrid.current?.getBoundingClientRect());\n  }, [chessGrid]);\n\n  return (\n    <div className={styles.container}>\n      <div ref={chessGrid} className={styles.chessGrid}>\n        {RankArray.map((r) =>\n          FileArray.map((f) => (\n            <GridPosition rank={r} file={f} bound={bound} key={r + f} />\n          ))\n        )}\n      </div>\n    </div>\n  );\n};\n\nfunction App() {\n  return (\n    <DraggableContextProvider>\n      <Board />\n    </DraggableContextProvider>\n  );\n}\n\nexport default App;\n\nconst useOnWindowResize = (action: Function) => {\n  useEffect(() => {\n    const handleResize = () => {\n      action();\n    };\n    window.addEventListener(\"resize\", handleResize);\n    handleResize();\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, [action]);\n};\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__3Hag2\",\"chessGrid\":\"App_chessGrid__3cPOC\",\"chessSquare\":\"App_chessSquare__SDQaO\",\"light\":\"App_light__3AKuB\",\"highlighted\":\"App_highlighted__19TOk\"};"],"sourceRoot":""}