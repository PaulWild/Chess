(this["webpackJsonpchess-board"]=this["webpackJsonpchess-board"]||[]).push([[0],{11:function(e,o,i){},12:function(e,o,i){},14:function(e,o,i){"use strict";i.r(o);var t=i(1),n=i.n(t),r=i(6),c=i.n(r),a=(i(11),i(3)),l=(i(12),i(0)),s=function(e){var o=e.children,i=e.boundingBox,r=e.onMouseDown,c=e.onMouseMove,s=e.onMouseUp,u=Object(t.useState)({x:0,y:0,pressed:!1}),f=Object(a.a)(u,2),d=f[0],v=f[1],p=Object(t.useState)({x:0,y:0}),h=Object(a.a)(p,2),j=h[0],k=h[1],b=Object(t.useRef)(null);Object(t.useEffect)((function(){b.current&&d.pressed?b.current.style.transform="translate(".concat(j.x,"px, ").concat(j.y,"px)"):b.current&&(b.current.style.transform="")}),[j,d.pressed]);var O=n.a.useCallback((function(){v({x:0,y:0,pressed:!1}),k({x:0,y:0}),null===s||void 0===s||s(-1,-1)}),[s]),m=n.a.useCallback((function(e){var o;o="mousemove"===e.type?e:e.touches[0];var t=i?Math.max(Math.min(o.pageX,i.right),i.left):o.pageX,n=i?Math.max(Math.min(o.pageY,i.bottom),i.top):o.pageY,r=t-d.x,a=n-d.y;null===c||void 0===c||c(t,n),k({x:r,y:a})}),[d,i,c]),x=Object(t.useRef)(m);Object(t.useEffect)((function(){d.pressed?(x.current=m,document.addEventListener("mousemove",m),document.addEventListener("mouseup",O),document.addEventListener("touchmove",m),document.addEventListener("touchend",O)):(document.removeEventListener("mousemove",x.current),document.removeEventListener("mouseup",O),document.removeEventListener("touchmove",x.current),document.removeEventListener("touchend",O))}),[d.pressed,m,O]);var g=function(e){var o,t;t="mousedown"===e.type?e:e.touches[0];var n=null===(o=b.current)||void 0===o?void 0:o.getBoundingClientRect(),c=t.pageX,a=t.pageY;n&&(c=(null===n||void 0===n?void 0:n.x)+(null===n||void 0===n?void 0:n.width)/2,a=(null===n||void 0===n?void 0:n.y)+(null===n||void 0===n?void 0:n.height)/2);var l=i?Math.max(Math.min(t.pageX,i.right),i.left):t.pageX,s=i?Math.max(Math.min(t.pageY,i.bottom),i.top):t.pageY;k({x:l-c,y:s-a}),null===r||void 0===r||r(l,s),v({x:c,y:a,pressed:!0})};return Object(l.jsx)("div",{ref:b,onMouseDown:g,onTouchStart:g,children:o})},u=i(2);function f(e){return Object(l.jsx)("svg",Object(u.a)(Object(u.a)({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 45 45"},e),{},{children:Object(l.jsxs)("g",{fill:"none",fillRule:"evenodd",stroke:"#000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",children:[Object(l.jsxs)("g",{fill:"#000",strokeLinecap:"butt",children:[Object(l.jsx)("path",{d:"M9 36c3.39-.97 10.11.43 13.5-2 3.39 2.43 10.11 1.03 13.5 2 0 0 1.65.54 3 2-.68.97-1.65.99-3 .5-3.39-.97-10.11.46-13.5-1-3.39 1.46-10.11.03-13.5 1-1.35.49-2.32.47-3-.5 1.35-1.46 3-2 3-2z"}),Object(l.jsx)("path",{d:"M15 32c2.5 2.5 12.5 2.5 15 0 .5-1.5 0-2 0-2 0-2.5-2.5-4-2.5-4 5.5-1.5 6-11.5-5-15.5-11 4-10.5 14-5 15.5 0 0-2.5 1.5-2.5 4 0 0-.5.5 0 2z"}),Object(l.jsx)("path",{d:"M25 8a2.5 2.5 0 11-5 0 2.5 2.5 0 115 0z"})]}),Object(l.jsx)("path",{d:"M17.5 26h10M15 30h15m-7.5-14.5v5M20 18h5",stroke:"#fff",strokeLinejoin:"miter"})]})}))}var d=t.memo(f);function v(e){return Object(l.jsx)("svg",Object(u.a)(Object(u.a)({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 45 45"},e),{},{children:Object(l.jsxs)("g",{fill:"none",fillRule:"evenodd",stroke:"#000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",children:[Object(l.jsxs)("g",{fill:"#fff",strokeLinecap:"butt",children:[Object(l.jsx)("path",{d:"M9 36c3.39-.97 10.11.43 13.5-2 3.39 2.43 10.11 1.03 13.5 2 0 0 1.65.54 3 2-.68.97-1.65.99-3 .5-3.39-.97-10.11.46-13.5-1-3.39 1.46-10.11.03-13.5 1-1.35.49-2.32.47-3-.5 1.35-1.46 3-2 3-2z"}),Object(l.jsx)("path",{d:"M15 32c2.5 2.5 12.5 2.5 15 0 .5-1.5 0-2 0-2 0-2.5-2.5-4-2.5-4 5.5-1.5 6-11.5-5-15.5-11 4-10.5 14-5 15.5 0 0-2.5 1.5-2.5 4 0 0-.5.5 0 2z"}),Object(l.jsx)("path",{d:"M25 8a2.5 2.5 0 11-5 0 2.5 2.5 0 115 0z"})]}),Object(l.jsx)("path",{d:"M17.5 26h10M15 30h15m-7.5-14.5v5M20 18h5",strokeLinejoin:"miter"})]})}))}var p=t.memo(v);function h(e){return Object(l.jsx)("svg",Object(u.a)(Object(u.a)({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 45 45"},e),{},{children:Object(l.jsxs)("g",{fill:"none",fillRule:"evenodd",stroke:"#000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",children:[Object(l.jsx)("path",{d:"M22.5 11.63V6",strokeLinejoin:"miter"}),Object(l.jsx)("path",{d:"M22.5 25s4.5-7.5 3-10.5c0 0-1-2.5-3-2.5s-3 2.5-3 2.5c-1.5 3 3 10.5 3 10.5",fill:"#000",strokeLinecap:"butt",strokeLinejoin:"miter"}),Object(l.jsx)("path",{d:"M12.5 37c5.5 3.5 14.5 3.5 20 0v-7s9-4.5 6-10.5c-4-6.5-13.5-3.5-16 4V27v-3.5c-2.5-7.5-12-10.5-16-4-3 6 6 10.5 6 10.5v7",fill:"#000"}),Object(l.jsx)("path",{d:"M20 8h5",strokeLinejoin:"miter"}),Object(l.jsx)("path",{d:"M32 29.5s8.5-4 6.03-9.65C34.15 14 25 18 22.5 24.5v2.1-2.1C20 18 10.85 14 6.97 19.85 4.5 25.5 13 29.5 13 29.5",stroke:"#fff"}),Object(l.jsx)("path",{d:"M12.5 30c5.5-3 14.5-3 20 0m-20 3.5c5.5-3 14.5-3 20 0m-20 3.5c5.5-3 14.5-3 20 0",stroke:"#fff"})]})}))}var j=t.memo(h);function k(e){return Object(l.jsx)("svg",Object(u.a)(Object(u.a)({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 45 45"},e),{},{children:Object(l.jsxs)("g",{fill:"none",fillRule:"evenodd",stroke:"#000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",children:[Object(l.jsx)("path",{d:"M22.5 11.63V6M20 8h5",strokeLinejoin:"miter"}),Object(l.jsx)("path",{d:"M22.5 25s4.5-7.5 3-10.5c0 0-1-2.5-3-2.5s-3 2.5-3 2.5c-1.5 3 3 10.5 3 10.5",fill:"#fff",strokeLinecap:"butt",strokeLinejoin:"miter"}),Object(l.jsx)("path",{d:"M12.5 37c5.5 3.5 14.5 3.5 20 0v-7s9-4.5 6-10.5c-4-6.5-13.5-3.5-16 4V27v-3.5c-2.5-7.5-12-10.5-16-4-3 6 6 10.5 6 10.5v7",fill:"#fff"}),Object(l.jsx)("path",{d:"M12.5 30c5.5-3 14.5-3 20 0M12.5 33.5c5.5-3 14.5-3 20 0M12.5 37c5.5-3 14.5-3 20 0"})]})}))}var b=t.memo(k);function O(e){return Object(l.jsx)("svg",Object(u.a)(Object(u.a)({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 45 45"},e),{},{children:Object(l.jsxs)("g",{fill:"none",fillRule:"evenodd",stroke:"#000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",children:[Object(l.jsx)("path",{d:"M22 10c10.5 1 16.5 8 16 29H15c0-9 10-6.5 8-21",fill:"#000"}),Object(l.jsx)("path",{d:"M24 18c.38 2.91-5.55 7.37-8 9-3 2-2.82 4.34-5 4-1.042-.94 1.41-3.04 0-3-1 0 .19 1.23-1 2-1 0-4.003 1-4-4 0-2 6-12 6-12s1.89-1.9 2-3.5c-.73-.994-.5-2-.5-3 1-1 3 2.5 3 2.5h2s.78-1.992 2.5-3c1 0 1 3 1 3",fill:"#000"}),Object(l.jsx)("path",{d:"M9.5 25.5a.5.5 0 11-1 0 .5.5 0 111 0z",fill:"#fff",stroke:"#fff"}),Object(l.jsx)("path",{d:"M14.933 15.75a.5 1.5 30 11-.866-.5.5 1.5 30 11.866.5z",fill:"#fff",stroke:"#fff",strokeWidth:1.49997}),Object(l.jsx)("path",{d:"M24.55 10.4l-.45 1.45.5.15c3.15 1 5.65 2.49 7.9 6.75S35.75 29.06 35.25 39l-.05.5h2.25l.05-.5c.5-10.06-.88-16.85-3.25-21.34-2.37-4.49-5.79-6.64-9.19-7.16l-.51-.1z",fill:"#fff",stroke:"none"})]})}))}var m=t.memo(O);function x(e){return Object(l.jsx)("svg",Object(u.a)(Object(u.a)({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 45 45"},e),{},{children:Object(l.jsxs)("g",{fill:"none",fillRule:"evenodd",stroke:"#000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",children:[Object(l.jsx)("path",{d:"M22 10c10.5 1 16.5 8 16 29H15c0-9 10-6.5 8-21",fill:"#fff"}),Object(l.jsx)("path",{d:"M24 18c.38 2.91-5.55 7.37-8 9-3 2-2.82 4.34-5 4-1.042-.94 1.41-3.04 0-3-1 0 .19 1.23-1 2-1 0-4.003 1-4-4 0-2 6-12 6-12s1.89-1.9 2-3.5c-.73-.994-.5-2-.5-3 1-1 3 2.5 3 2.5h2s.78-1.992 2.5-3c1 0 1 3 1 3",fill:"#fff"}),Object(l.jsx)("path",{d:"M9.5 25.5a.5.5 0 11-1 0 .5.5 0 111 0z",fill:"#000"}),Object(l.jsx)("path",{d:"M14.933 15.75a.5 1.5 30 11-.866-.5.5 1.5 30 11.866.5z",fill:"#000",strokeWidth:1.49997})]})}))}var g=t.memo(x),M=function(e){return Object(l.jsx)("svg",Object(u.a)(Object(u.a)({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 45 45"},e),{},{children:Object(l.jsx)("path",{d:"M22.5 9c-2.21 0-4 1.79-4 4 0 .89.29 1.71.78 2.38C17.33 16.5 16 18.59 16 21c0 2.03.94 3.84 2.41 5.03-3 1.06-7.41 5.55-7.41 13.47h23c0-7.92-4.41-12.41-7.41-13.47 1.47-1.19 2.41-3 2.41-5.03 0-2.41-1.33-4.5-3.28-5.62.49-.67.78-1.49.78-2.38 0-2.21-1.79-4-4-4z",stroke:"#000",strokeWidth:1.5,strokeLinecap:"round"})}))},w=t.memo(M);function L(e){return Object(l.jsx)("svg",Object(u.a)(Object(u.a)({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 45 45"},e),{},{children:Object(l.jsx)("path",{d:"M22.5 9c-2.21 0-4 1.79-4 4 0 .89.29 1.71.78 2.38C17.33 16.5 16 18.59 16 21c0 2.03.94 3.84 2.41 5.03-3 1.06-7.41 5.55-7.41 13.47h23c0-7.92-4.41-12.41-7.41-13.47 1.47-1.19 2.41-3 2.41-5.03 0-2.41-1.33-4.5-3.28-5.62.49-.67.78-1.49.78-2.38 0-2.21-1.79-4-4-4z",fill:"#fff",stroke:"#000",strokeWidth:1.5,strokeLinecap:"round"})}))}var E=t.memo(L);function W(e){return Object(l.jsx)("svg",Object(u.a)(Object(u.a)({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 45 45"},e),{},{children:Object(l.jsxs)("g",{stroke:"#000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",children:[Object(l.jsx)("path",{d:"M9 26c8.5-1.5 21-1.5 27 0l2.5-12.5L31 25l-.3-14.1-5.2 13.6-3-14.5-3 14.5-5.2-13.6L14 25 6.5 13.5 9 26z",strokeLinecap:"butt"}),Object(l.jsx)("path",{d:"M9 26c0 2 1.5 2 2.5 4 1 1.5 1 1 .5 3.5-1.5 1-1 2.5-1 2.5-1.5 1.5 0 2.5 0 2.5 6.5 1 16.5 1 23 0 0 0 1.5-1 0-2.5 0 0 .5-1.5-1-2.5-.5-2.5-.5-2 .5-3.5 1-2 2.5-2 2.5-4-8.5-1.5-18.5-1.5-27 0zM11.5 30c3.5-1 18.5-1 22 0M12 33.5c6-1 15-1 21 0"}),Object(l.jsx)("circle",{cx:6,cy:12,r:2}),Object(l.jsx)("circle",{cx:14,cy:9,r:2}),Object(l.jsx)("circle",{cx:22.5,cy:8,r:2}),Object(l.jsx)("circle",{cx:31,cy:9,r:2}),Object(l.jsx)("circle",{cx:39,cy:12,r:2}),Object(l.jsx)("path",{d:"M11 38.5a35 35 1 0023 0",fill:"none",strokeLinecap:"butt"}),Object(l.jsx)("g",{fill:"none",stroke:"#fff",children:Object(l.jsx)("path",{d:"M11 29a35 35 1 0123 0M12.5 31.5h20M11.5 34.5a35 35 1 0022 0M10.5 37.5a35 35 1 0024 0"})})]})}))}var P=t.memo(W);function A(e){return Object(l.jsx)("svg",Object(u.a)(Object(u.a)({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 45 45"},e),{},{children:Object(l.jsxs)("g",{fill:"#fff",stroke:"#000",strokeWidth:1.5,strokeLinejoin:"round",children:[Object(l.jsx)("path",{d:"M9 26c8.5-1.5 21-1.5 27 0l2.5-12.5L31 25l-.3-14.1-5.2 13.6-3-14.5-3 14.5-5.2-13.6L14 25 6.5 13.5 9 26z"}),Object(l.jsx)("path",{d:"M9 26c0 2 1.5 2 2.5 4 1 1.5 1 1 .5 3.5-1.5 1-1 2.5-1 2.5-1.5 1.5 0 2.5 0 2.5 6.5 1 16.5 1 23 0 0 0 1.5-1 0-2.5 0 0 .5-1.5-1-2.5-.5-2.5-.5-2 .5-3.5 1-2 2.5-2 2.5-4-8.5-1.5-18.5-1.5-27 0z"}),Object(l.jsx)("path",{d:"M11.5 30c3.5-1 18.5-1 22 0M12 33.5c6-1 15-1 21 0",fill:"none"}),Object(l.jsx)("circle",{cx:6,cy:12,r:2}),Object(l.jsx)("circle",{cx:14,cy:9,r:2}),Object(l.jsx)("circle",{cx:22.5,cy:8,r:2}),Object(l.jsx)("circle",{cx:31,cy:9,r:2}),Object(l.jsx)("circle",{cx:39,cy:12,r:2})]})}))}var y=t.memo(A);function H(e){return Object(l.jsx)("svg",Object(u.a)(Object(u.a)({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 45 45"},e),{},{children:Object(l.jsxs)("g",{fillRule:"evenodd",stroke:"#000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",children:[Object(l.jsx)("path",{d:"M9 39h27v-3H9v3zM12.5 32l1.5-2.5h17l1.5 2.5h-20zM12 36v-4h21v4H12z",strokeLinecap:"butt"}),Object(l.jsx)("path",{d:"M14 29.5v-13h17v13H14z",strokeLinecap:"butt",strokeLinejoin:"miter"}),Object(l.jsx)("path",{d:"M14 16.5L11 14h23l-3 2.5H14zM11 14V9h4v2h5V9h5v2h5V9h4v5H11z",strokeLinecap:"butt"}),Object(l.jsx)("path",{d:"M12 35.5h21M13 31.5h19M14 29.5h17M14 16.5h17M11 14h23",fill:"none",stroke:"#fff",strokeWidth:1,strokeLinejoin:"miter"})]})}))}function C(e){return Object(l.jsx)("svg",Object(u.a)(Object(u.a)({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 45 45"},e),{},{children:Object(l.jsxs)("g",{fill:"#fff",fillRule:"evenodd",stroke:"#000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",children:[Object(l.jsx)("path",{d:"M9 39h27v-3H9v3zM12 36v-4h21v4H12zM11 14V9h4v2h5V9h5v2h5V9h4v5",strokeLinecap:"butt"}),Object(l.jsx)("path",{d:"M34 14l-3 3H14l-3-3"}),Object(l.jsx)("path",{d:"M31 17v12.5H14V17",strokeLinecap:"butt",strokeLinejoin:"miter"}),Object(l.jsx)("path",{d:"M31 29.5l1.5 2.5h-20l1.5-2.5"}),Object(l.jsx)("path",{d:"M11 14h23",fill:"none",strokeLinejoin:"miter"})]})}))}var B={King:j,Queen:P,Knight:m,Bishop:d,Pawn:w,Rook:t.memo(H)},I={King:b,Queen:y,Knight:g,Bishop:p,Pawn:E,Rook:t.memo(C)},K=i(4),T=i.n(K),N=[8,7,6,5,4,3,2,1],R=["a","b","c","d","e","f","g","h"],S=function(e,o){var i=o.find((function(o){return"KING"===o.piece&&o.colour===e}));return o.filter((function(o){return o.colour!==e})).flatMap((function(e){return z(e,o)})).some((function(e){return e.file===(null===i||void 0===i?void 0:i.position.file)&&e.rank===(null===i||void 0===i?void 0:i.position.rank)}))},z=function(e,o){switch(e.piece){case"PAWN":return V(e,o);case"ROOK":return G(e,o);case"BISHOP":return q(e,o);case"QUEEN":return Q(e,o);case"KNIGHT":return D(e,o);case"KING":return U(e,o);default:throw Error("nope")}},_=function(e,o){return o.find((function(o){return o.position.rank===e.rank&&o.position.file===(null===e||void 0===e?void 0:e.file)}))},V=function(e,o){for(var i="WHITE"===e.colour?2:7,t="WHITE"===e.colour?1:-1,n=e.position.rank===i?2:1,r=[],c=1;c<=n;c++){var a=e.position.rank+c*t;if(a){if(_({rank:a,file:null===e||void 0===e?void 0:e.position.file},o))break;r.push({move:"Move",rank:a,file:e.position.file})}}if("a"!==e.position.file){var l=R[R.indexOf(e.position.file)-1],s=e.position.rank+1*t,u=_({rank:s,file:l},o);u&&u.colour!==e.colour&&r.push({move:"Move",rank:s,file:l})}if("h"!==e.position.file){var f=R[R.indexOf(e.position.file)+1],d=e.position.rank+1*t,v=_({rank:d,file:f},o);v&&v.colour!==e.colour&&r.push({move:"Move",rank:d,file:f})}return r},G=function(e,o){for(var i=[],t=R.indexOf(e.position.file)-1;t>=0;t--){var n=_({rank:e.position.rank,file:R[t]},o);if(n&&n.colour!==e.colour){i.push({move:"Move",rank:e.position.rank,file:R[t]});break}if(n)break;i.push({move:"Move",rank:e.position.rank,file:R[t]})}for(var r=R.indexOf(e.position.file)+1;r<R.length;r++){var c=_({rank:e.position.rank,file:R[r]},o);if(c&&c.colour!==e.colour){i.push({move:"Move",rank:e.position.rank,file:R[r]});break}if(c)break;i.push({move:"Move",rank:e.position.rank,file:R[r]})}for(var a=e.position.rank+1;a<=N.length;a++){var l=_({rank:a,file:e.position.file},o);if(l&&l.colour!==e.colour){i.push({move:"Move",rank:a,file:e.position.file});break}if(l)break;i.push({move:"Move",rank:a,file:e.position.file})}for(var s=e.position.rank-1;s>=0;s--){var u=_({rank:s,file:e.position.file},o);if(u&&u.colour!==e.colour){i.push({move:"Move",rank:s,file:e.position.file});break}if(u)break;i.push({move:"Move",rank:s,file:e.position.file})}return i},q=function(e,o){for(var i=[],t=R.indexOf(e.position.file),n=e.position.rank,r=1;r<8;r++){var c=t-r,a=n-r;if(a<1||c<0)break;var l=_({rank:a,file:R[c]},o);if(l&&l.colour!==e.colour){i.push({move:"Move",rank:a,file:R[c]});break}if(l)break;i.push({move:"Move",rank:a,file:R[c]})}for(var s=1;s<8;s++){var u=t-s,f=n+s;if(f>8||u<0)break;var d=_({rank:f,file:R[u]},o);if(d&&d.colour!==e.colour){i.push({move:"Move",rank:f,file:R[u]});break}if(d)break;i.push({move:"Move",rank:f,file:R[u]})}for(var v=1;v<8;v++){var p=t+v,h=n-v;if(h<1||p>7)break;var j=_({rank:h,file:R[p]},o);if(j&&j.colour!==e.colour){i.push({move:"Move",rank:h,file:R[p]});break}if(j)break;i.push({move:"Move",rank:h,file:R[p]})}for(var k=1;k<8;k++){var b=t+k,O=n+k;if(O>8||b>7)break;var m=_({rank:O,file:R[b]},o);if(m&&m.colour!==e.colour){i.push({move:"Move",rank:O,file:R[b]});break}if(m)break;i.push({move:"Move",rank:O,file:R[b]})}return i},Q=function(e,o){return G(e,o).concat(q(e,o))},D=function(e,o){var i=[],t=R.indexOf(e.position.file),n=e.position.rank;return[[1,2],[2,1],[-1,2],[-2,1],[-1,-2],[-2,-1],[1,-2],[2,-1]].forEach((function(r){var c=Object(a.a)(r,2),l=c[0],s=c[1],u=t+s,f=n+l;if(!(f>8||u>7||f<1||u<0)){var d=_({rank:f,file:R[u]},o);d&&d.colour!==e.colour?i.push({move:"Move",rank:f,file:R[u]}):d||i.push({move:"Move",rank:f,file:R[u]})}})),i},U=function(e,o){var i=[],t=R.indexOf(e.position.file),n=e.position.rank;[[1,1],[0,1],[1,0],[-1,0],[-1,-1],[0,-1],[-1,1],[1,-1]].forEach((function(r){var c=Object(a.a)(r,2),l=c[0],s=c[1],u=t+s,f=n+l;if(!(f>8||u>7||f<1||u<0)){var d=_({rank:f,file:R[u]},o);d&&d.colour!==e.colour?i.push({move:"Move",rank:f,file:R[u]}):d||i.push({move:"Move",rank:f,file:R[u]})}}));var r=e.colour;if(o.find((function(e){return"ROOK"===e.piece&&e.colour===r&&"h"===e.position.file&&!1===e.moved}))&&!e.moved){[[0,0],[0,1],[0,2]].every((function(i){var r=Object(a.a)(i,2),c=r[0],l=r[1],s=t+l,u=n+c;if(!o.find((function(e){return e.position.file===R[s]&&e.position.rank===u}))||0===c&&0===l){var f=o.filter((function(o){return!(o.position.rank===e.position.rank&&o.position.file===e.position.file)}));return f.push({colour:null===e||void 0===e?void 0:e.colour,piece:e.piece,moved:!0,position:{rank:u,file:R[s]}}),!S(e.colour,f)}return!1}))&&i.push({move:"Castle",type:"SHORT",colour:e.colour,rank:n,file:R[t+2]})}if(o.find((function(e){return"ROOK"===e.piece&&e.colour===r&&"a"===e.position.file&&!1===e.moved}))&&!e.moved){[[0,0],[0,-1],[0,-2]].every((function(i){var r=Object(a.a)(i,2),c=r[0],l=r[1],s=t+l,u=n+c;if(!o.find((function(e){return e.position.file===R[s]&&e.position.rank===u}))||0===c&&0===l){var f=o.filter((function(o){return!(o.position.rank===e.position.rank&&o.position.file===e.position.file)}));return f.push({colour:null===e||void 0===e?void 0:e.colour,piece:e.piece,moved:!0,position:{rank:u,file:R[s]}}),!S(e.colour,f)}return!1}))&&i.push({move:"Castle",type:"LONG",colour:e.colour,rank:n,file:R[t-2]})}return i},X={board:[{position:{rank:1,file:"a"},piece:"ROOK",colour:"WHITE",moved:!1},{position:{rank:1,file:"b"},piece:"KNIGHT",colour:"WHITE",moved:!1},{position:{rank:1,file:"c"},piece:"BISHOP",colour:"WHITE",moved:!1},{position:{rank:1,file:"d"},piece:"QUEEN",colour:"WHITE",moved:!1},{position:{rank:1,file:"e"},piece:"KING",colour:"WHITE",moved:!1},{position:{rank:1,file:"f"},piece:"BISHOP",colour:"WHITE",moved:!1},{position:{rank:1,file:"g"},piece:"KNIGHT",colour:"WHITE",moved:!1},{position:{rank:1,file:"h"},piece:"ROOK",colour:"WHITE",moved:!1},{position:{rank:2,file:"a"},piece:"PAWN",colour:"WHITE",moved:!1},{position:{rank:2,file:"b"},piece:"PAWN",colour:"WHITE",moved:!1},{position:{rank:2,file:"c"},piece:"PAWN",colour:"WHITE",moved:!1},{position:{rank:2,file:"d"},piece:"PAWN",colour:"WHITE",moved:!1},{position:{rank:2,file:"e"},piece:"PAWN",colour:"WHITE",moved:!1},{position:{rank:2,file:"f"},piece:"PAWN",colour:"WHITE",moved:!1},{position:{rank:2,file:"g"},piece:"PAWN",colour:"WHITE",moved:!1},{position:{rank:2,file:"h"},piece:"PAWN",colour:"WHITE",moved:!1},{position:{rank:8,file:"a"},piece:"ROOK",colour:"BLACK",moved:!1},{position:{rank:8,file:"b"},piece:"KNIGHT",colour:"BLACK",moved:!1},{position:{rank:8,file:"c"},piece:"BISHOP",colour:"BLACK",moved:!1},{position:{rank:8,file:"d"},piece:"QUEEN",colour:"BLACK",moved:!1},{position:{rank:8,file:"e"},piece:"KING",colour:"BLACK",moved:!1},{position:{rank:8,file:"f"},piece:"BISHOP",colour:"BLACK",moved:!1},{position:{rank:8,file:"g"},piece:"KNIGHT",colour:"BLACK",moved:!1},{position:{rank:8,file:"h"},piece:"ROOK",colour:"BLACK",moved:!1},{position:{rank:7,file:"a"},piece:"PAWN",colour:"BLACK",moved:!1},{position:{rank:7,file:"b"},piece:"PAWN",colour:"BLACK",moved:!1},{position:{rank:7,file:"c"},piece:"PAWN",colour:"BLACK",moved:!1},{position:{rank:7,file:"d"},piece:"PAWN",colour:"BLACK",moved:!1},{position:{rank:7,file:"e"},piece:"PAWN",colour:"BLACK",moved:!1},{position:{rank:7,file:"f"},piece:"PAWN",colour:"BLACK",moved:!1},{position:{rank:7,file:"g"},piece:"PAWN",colour:"BLACK",moved:!1},{position:{rank:7,file:"h"},piece:"PAWN",colour:"BLACK",moved:!1}]},Y=Object(t.createContext)([X,function(){return null}]),F=function(e,o){var i,t,n,r;switch(o.type){case"PIECE_HOVER":if(!e.activePiece)throw new Error("state is corrupted");return Object(u.a)(Object(u.a)({},e),{},{activePiece:Object(u.a)(Object(u.a)({},e.activePiece),{},{x:o.payload.x,y:o.payload.y})});case"PIECE_ACTIVATED":return Object(u.a)(Object(u.a)({},e),{},{activePiece:Object(u.a)({},o.payload)});case"SQUARE_ATTACKED":return Object(u.a)(Object(u.a)({},e),{},{threatenedSquare:Object(u.a)({},o.payload)});case"MOVE":if(!e.threatenedSquare)throw new Error("state is corrupted");if(!e.activePiece)throw new Error("state is corrupted");var c=e.board.find((function(o){var i,t;return o.position.rank===(null===(i=e.activePiece)||void 0===i?void 0:i.rank)&&o.position.file===(null===(t=e.activePiece)||void 0===t?void 0:t.file)}));if(!c)throw new Error("state is corrupted");var a=function(e,o){return z(e,o).filter((function(i){if("Castle"===i.move)return!0;var t=i,n=o.filter((function(o){return!(o.position.rank===e.position.rank&&o.position.file===e.position.file)&&!(o.position.rank===t.rank&&o.position.file===t.file)}));return n.push({colour:null===e||void 0===e?void 0:e.colour,piece:e.piece,moved:!0,position:{rank:t.rank,file:t.file}}),!S(e.colour,n)}))}(c,e.board);console.log(a);var l=a.find((function(o){var i,t;return o.file===(null===(i=e.threatenedSquare)||void 0===i?void 0:i.file)&&o.rank===(null===(t=e.threatenedSquare)||void 0===t?void 0:t.rank)}));if(!l)return{board:e.board};switch(l.move){case"Castle":console.log(l);var s="SHORT"===l.type?"h":"a",f="WHITE"===l.colour?1:8,d=e.board.filter((function(o){var i,t;return!(o.position.rank===(null===(i=e.activePiece)||void 0===i?void 0:i.rank)&&o.position.file===(null===(t=e.activePiece)||void 0===t?void 0:t.file))&&!(o.position.rank===f&&o.position.file===s)})),v="SHORT"===l.type?"f":"d";return d.push({colour:null===c||void 0===c?void 0:c.colour,piece:"ROOK",moved:!0,position:{rank:f,file:v}}),d.push({colour:null===c||void 0===c?void 0:c.colour,piece:c.piece,moved:!0,position:{rank:null===(i=e.threatenedSquare)||void 0===i?void 0:i.rank,file:null===(t=e.threatenedSquare)||void 0===t?void 0:t.file}}),{board:d};case"Move":var p=e.board.filter((function(o){var i,t,n,r;return!(o.position.rank===(null===(i=e.activePiece)||void 0===i?void 0:i.rank)&&o.position.file===(null===(t=e.activePiece)||void 0===t?void 0:t.file))&&!(o.position.rank===(null===(n=e.threatenedSquare)||void 0===n?void 0:n.rank)&&o.position.file===(null===(r=e.threatenedSquare)||void 0===r?void 0:r.file))}));return p.push({colour:null===c||void 0===c?void 0:c.colour,piece:c.piece,moved:!0,position:{rank:null===(n=e.threatenedSquare)||void 0===n?void 0:n.rank,file:null===(r=e.threatenedSquare)||void 0===r?void 0:r.file}}),{board:p}}}},J=function(e){var o=e.children,i=Object(t.useReducer)(F,X),n=Object(a.a)(i,2),r=n[0],c=n[1];return Object(l.jsx)(Y.Provider,{value:[r,c],children:o})},Z=function(e){var o=e.rank,i=e.file,n=e.bound,r=Object(t.useRef)(null),c=Object(t.useContext)(Y),u=Object(a.a)(c,2),f=u[0],d=u[1],v=Object(t.useState)(!1),p=Object(a.a)(v,2),h=p[0],j=p[1],k=function(e,o){return e%2===0&&R.indexOf(o)%2===0||e%2===1&&R.indexOf(o)%2===1}(o,i),b=function(e,o,i){var t=i.find((function(i){return i.position.file===o&&i.position.rank===e}));if(t){var n="WHITE"===t.colour?I:B;switch(t.piece){case"BISHOP":return n.Bishop;case"KING":return n.King;case"KNIGHT":return n.Knight;case"PAWN":return n.Pawn;case"QUEEN":return n.Queen;case"ROOK":return n.Rook}}}(o,i,f.board);Object(t.useEffect)((function(){var e,o=null===(e=r.current)||void 0===e?void 0:e.getBoundingClientRect();o&&(f.activePiece&&f.activePiece.x>=(null===o||void 0===o?void 0:o.left)&&f.activePiece.x<(null===o||void 0===o?void 0:o.right)&&f.activePiece.y>=o.top&&f.activePiece.y<o.bottom?j(!0):j(!1))}),[f,o,i]),Object(t.useEffect)((function(){h&&d({type:"SQUARE_ATTACKED",payload:{rank:o,file:i}})}),[h,d,i,o]);var O=Object(t.useCallback)((function(e,o){return d({type:"PIECE_HOVER",payload:{x:e,y:o}})}),[d]),m=Object(t.useCallback)((function(e,t){return d({type:"PIECE_ACTIVATED",payload:{rank:o,file:i,x:e,y:t}})}),[d,o,i]),x=Object(t.useCallback)((function(){return d({type:"MOVE"})}),[d]);return Object(l.jsx)("div",{className:"".concat(T.a.chessSquare," ").concat(k?T.a.light:""," ").concat(h?T.a.highlighted:""),rank:o,file:i,ref:r,children:b&&Object(l.jsx)(s,{boundingBox:n,onMouseUp:x,onMouseMove:O,onMouseDown:m,children:Object(l.jsx)(b,{})})},o+i)},$=function(){var e=Object(t.useRef)(null),o=Object(t.useState)(),i=Object(a.a)(o,2),n=i[0],r=i[1],c=Object(t.useCallback)((function(){var o;r(null===(o=e.current)||void 0===o?void 0:o.getBoundingClientRect())}),[]);return oe(c),Object(t.useEffect)((function(){var o;r(null===(o=e.current)||void 0===o?void 0:o.getBoundingClientRect())}),[e]),Object(l.jsx)("div",{className:T.a.container,children:Object(l.jsx)("div",{ref:e,className:T.a.chessGrid,children:N.map((function(e){return R.map((function(o){return Object(l.jsx)(Z,{rank:e,file:o,bound:n},e+o)}))}))})})};var ee=function(){return Object(l.jsx)(J,{children:Object(l.jsx)($,{})})},oe=function(e){Object(t.useEffect)((function(){var o=function(){e()};return window.addEventListener("resize",o),o(),function(){return window.removeEventListener("resize",o)}}),[e])},ie=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,15)).then((function(o){var i=o.getCLS,t=o.getFID,n=o.getFCP,r=o.getLCP,c=o.getTTFB;i(e),t(e),n(e),r(e),c(e)}))};c.a.render(Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)(ee,{})}),document.getElementById("root")),ie()},4:function(e,o,i){e.exports={container:"App_container__3Hag2",chessGrid:"App_chessGrid__3cPOC",chessSquare:"App_chessSquare__SDQaO",light:"App_light__3AKuB",highlighted:"App_highlighted__19TOk"}}},[[14,1,2]]]);
//# sourceMappingURL=main.1ea88045.chunk.js.map